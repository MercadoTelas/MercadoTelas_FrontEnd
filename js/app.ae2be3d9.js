(function(){var e={6700:function(e,t,a){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id=6700},8412:function(e,t,a){"use strict";var s=a(9242),n=a(4870),o=a(2483),r=a(7139);const i=(0,r.MT)({state(){const e="true"===localStorage.getItem("checkboxValue"),t="true"===localStorage.getItem("isLoggedIn"),a=localStorage.getItem("current_warehouse_logged_id")||"",s=6e5,n=localStorage.getItem("sessionToken")||"",o="true"===localStorage.getItem("LogAttempts");let r=null;try{r=JSON.parse(localStorage.getItem("user"))}catch(i){console.error("Error parsing 'user' from localStorage:",i)}return{checkboxValue:e,isLoggedIn:t,currentWarehouseLoggedId:a,sessionTimeout:s,sessionToken:n,LogAttempts:o,user:r,selectedItems:[],warehouseSend:{}}},mutations:{toggleCheckboxValue(e){e.checkboxValue=!e.checkboxValue},setCheck(e,t){e.checkboxValue=t,localStorage.setItem("checkboxValue",t.toString())},setLoggedIn(e,t){e.isLoggedIn=t,localStorage.setItem("isLoggedIn",t.toString())},setSessionToken(e,t){e.sessionToken=t,localStorage.setItem("sessionToken",t.toString())},setLogAttempt(e,t){e.LogAttempts=t},setUser(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},setCurrentWarehouseLoggedId(e,t){e.currentWarehouseLoggedId=t,localStorage.setItem("current_warehouse_logged_id",t)},setSelectedItems(e,t){e.selectedItems=t},setWarehouse(e,t){e.warehouseSend=t}}});var l=i,c=a(3396),d=a(2268);const u=e=>((0,c.dD)("data-v-92984092"),e=e(),(0,c.Cn)(),e),m={class:"container-fluid"},h={class:"button-container",style:{"align-items":"center","justify-content":"center","margin-bottom":"20px"}},_={class:"filter-row"},g=u((()=>(0,c._)("label",{for:"bodega"},"Bodega:",-1))),p=u((()=>(0,c._)("option",{value:""},"Todas las bodegas",-1))),b=["value"],f={class:"filter-row"},v=u((()=>(0,c._)("label",{for:"tipo"},"Tipo de artículo:",-1))),y=u((()=>(0,c._)("option",{value:""},"Todos los types",-1))),w=["value"],k={class:"filter-row"},C=u((()=>(0,c._)("label",{for:"search"},"Buscar artículo:",-1))),x={class:"row"},D={class:"col-lg-6"},I={class:"card",style:{height:"450px !important"}},O={class:"card-body"},S=u((()=>(0,c._)("h4",{class:"card-title text-success"}," Los 10 artículos más sacados de las bodegas ",-1))),A={class:"chart-container"},V={ref:"chartCanvas"},$={class:"col-lg-6"},T={class:"card",style:{height:"452px !important"}},U={class:"card-body"},L=u((()=>(0,c._)("h4",{class:"card-title text-danger"}," Artículos por debajo de la cantidad mínima de stock ",-1))),j={class:"table-container",id:"underStockTable",style:{"max-height":"350px","overflow-y":"auto"}},z={class:"table table-bordered kpi-table"},E=u((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código de item"),(0,c._)("th",null,"Nombre"),(0,c._)("th",null,"Cantidad de stock"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Marcar para hacer entrada")])],-1))),W=["value"],H=["disabled"],B={class:"row"},F={class:"col-lg-6",style:{"margin-top":"20px"}},M={class:"card",style:{height:"452px !important"}},Z={class:"card-body"},P=u((()=>(0,c._)("h4",{class:"card-title text-primary text-center"}," Últimos movimientos realizados en el inventario ",-1))),N={class:"table-container",id:"lastTransactions",style:{"max-height":"450px !important"}},q={class:"table table-bordered kpi-table"},R=u((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Fecha de movimiento"),(0,c._)("th",null,"Descripción del movimiento"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Responsable")])],-1))),K={class:"col-lg-6",style:{"margin-top":"20px"}},Y={class:"card",style:{height:"452px !important"}},Q={class:"card-body"},G=u((()=>(0,c._)("h4",{class:"card-title text-danger"}," Comparativa de Stock y Nivel Deseado por Artículo ",-1))),J={class:"chart-container"},X={ref:"chartLow"};function ee(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...t)=>e.handleCheckboxChange&&e.handleCheckboxChange(...t))},null,544),[[s.e8,r.checked]]),(0,c._)("div",m,[(0,c._)("div",h,[(0,c._)("div",_,[g,(0,c.wy)((0,c._)("select",{id:"bodega","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedWarehouse=e),onChange:t[3]||(t[3]=(...e)=>r.filterItems&&r.filterItems(...e))},[p,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.bodegas,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e,value:e},(0,d.zw)(e),9,b)))),128))],544),[[s.bM,o.selectedWarehouse]])]),(0,c._)("div",f,[v,(0,c.wy)((0,c._)("select",{id:"tipo","onUpdate:modelValue":t[4]||(t[4]=e=>o.selectedType=e),onChange:t[5]||(t[5]=(...e)=>r.filterItems&&r.filterItems(...e))},[y,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.types,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e,value:e},(0,d.zw)(e),9,w)))),128))],544),[[s.bM,o.selectedType]])]),(0,c._)("div",k,[C,(0,c.wy)((0,c._)("input",{type:"text",id:"search","onUpdate:modelValue":t[6]||(t[6]=e=>o.searchQuery=e),onInput:t[7]||(t[7]=(...e)=>r.filterItems&&r.filterItems(...e)),placeholder:"Escriba el nombre del artículo"},null,544),[[s.nr,o.searchQuery]])])]),(0,c._)("div",x,[(0,c._)("div",D,[(0,c._)("div",I,[(0,c._)("div",O,[S,(0,c._)("div",A,[(0,c._)("canvas",V,null,512)])])])]),(0,c._)("div",$,[(0,c._)("div",T,[(0,c._)("div",U,[L,(0,c._)("div",j,[(0,c._)("table",z,[E,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.low_stock_items,((e,a)=>((0,c.wg)(),(0,c.iD)("tr",{key:a},[(0,c._)("td",null,(0,d.zw)(e.general_code),1),(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",null,(0,d.zw)(e.storing_format_units),1),(0,c._)("td",null,(0,d.zw)(e.warehouse),1),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectedItems=e)},null,8,W),[[s.e8,o.selectedItems]])])])))),128))])])]),(0,c._)("button",{onClick:t[9]||(t[9]=(...e)=>r.createEntryTransaction&&r.createEntryTransaction(...e)),class:"btn btn-success",disabled:0===o.selectedItems.length||!r.sameWarehouse(o.selectedItems),style:{position:"absolute",bottom:"0",right:"0",margin:"10px","margin-bottom":"20px","margin-right":"20px"}}," Hacer entrada ",8,H)])])])]),(0,c._)("div",B,[(0,c._)("div",F,[(0,c._)("div",M,[(0,c._)("div",Z,[P,(0,c._)("div",N,[(0,c._)("table",q,[R,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.sortedMovements,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.date),1),(0,c._)("td",null,(0,d.zw)(e.description),1),(0,c._)("td",null,(0,d.zw)(e.warehouse),1),(0,c._)("td",null,(0,d.zw)(e.responsible),1)])))),128))])])])])])]),(0,c._)("div",K,[(0,c._)("div",Y,[(0,c._)("div",Q,[G,(0,c._)("div",J,[(0,c._)("canvas",X,null,512)])])])])])])])}a(7658);var te=a(1632),ae=a(1076);const se="https://mercado-telas-test-01a354800b9e.herokuapp.com";var ne=a(672),oe=a(6797),re=a.n(oe),ie={data(){return{sortedMovements:[],low_stock_items:[],items:[],low_stock_items_cloned:[],items_cloned:[],movementsData:[],selectedWarehouse:"",selectedType:"",selectedItems:[],bodegas:[],types:[],chartTop10:null,chartLow:null,searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},mounted(){const e=(0,r.oR)();this.$state.navbarTitle="Inicio";const t=e.state.user;e.state.LogAttempts||(ne.Am.success(`Hola ${t.name}, bienvenido al sistema de inventory del Mercado de las Telas`,{position:"top-right",timeout:2500,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),e.commit("setLogAttempt",!0)),ae.Z.get(se+"/categories").then((e=>{this.types=e.data.map((e=>e.name))})).catch((e=>{console.error(e)})),ae.Z.get(`${se}/warehouses`).then((e=>{this.bodegas=e.data.map((e=>e.name))})).catch((e=>{console.error(e)})),ae.Z.get(se+"/movement_logs").then((e=>{this.movementsData=e.data.movements_log.map((e=>({item_id:e.id,description:e.description,date:re()(e.created_at).format("DD/MM/YYYY"),warehouse:e.origin_warehouse.name,responsible:e.user.name}))),this.sortedMovements=this.sortMovements()})).catch((e=>{console.error(e)})),ae.Z.get(se+"/most_removed_items").then((e=>{this.items=e.data.map((e=>({item_id:e.id,name:e.name,removals:e.quantity_removed,category:e.category_name,storing_format_units_name:e.storing_format_units_name,transferring_format_units_name:e.transferring_format_units_name,general_code:e.general_code}))),this.items_cloned=this.items,this.createChartTop10(),this.filterItems()})).catch((e=>{console.error(e)})),ae.Z.get(se+"/low_stock_items").then((e=>{this.low_stock_items=e.data.map((e=>({item_id:e.item_id,name:e.name,storing_format_units:e.storing_format_units,storing_format_units_name:e.storing_format_units_name,warehouse:e.warehouse.name,warehouseComplete:e.warehouse,minimal_stock:e.minimal_stock,category:e.category,general_code:e.general_code}))),this.low_stock_items_cloned=this.low_stock_items,this.createChartLow(),this.filterItems()})).catch((e=>{console.error(e)}))},methods:{...(0,r.OI)(["toggleCheckboxValue"]),sortMovements(){return[...this.movementsData].sort(((e,t)=>new Date(t.date)-new Date(e.date)))},createChartTop10(){const e=this.$refs.chartCanvas,t=e.getContext("2d");let a=[...this.items].sort(((e,t)=>t.removals-e.removals)),s=a.map((e=>e.name)),o=a.map((e=>e.removals));this.chartTop10=(0,n.XI)(new te.ZP(t,{type:"bar",data:{labels:s,datasets:[{label:"Salidas de inventory ("+this.items[0].transferring_format_units_name+")",data:o,backgroundColor:"rgba(37, 168, 150, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{precision:0},title:{display:!0,text:"Unidades removidas"}},y:{grid:{display:!1},title:{display:!0,text:"Artículos"}}}}}))},createChartLow(){const e=this.$refs.chartLow,t=e.getContext("2d"),a=[...this.low_stock_items].sort(((e,t)=>e.storing_format_units-t.storing_format_units)),s=a.map((e=>e.name)),o=a.map((e=>e.storing_format_units)),r=a.map((e=>e.minimal_stock));this.chartLow=(0,n.XI)(new te.ZP(t,{type:"bar",data:{labels:s,datasets:[{label:"Nivel actual de stock",data:o,backgroundColor:"rgba(250, 10, 10, 0.5)",borderColor:"rgba(70, 70, 70, 1)",borderWidth:1},{label:"Nivel deseado de stock",data:r,backgroundColor:"rgba(10, 10, 255, 0.5)",borderColor:"rgba(70, 70, 70, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Artículos"}},y:{beginAtZero:!0,ticks:{precision:0},title:{display:!0,text:"Cantidad de stock"}}}}}))},filterItems(){this.items=this.items_cloned,this.low_stock_items=this.low_stock_items_cloned;let e=[...this.items],t=[...this.low_stock_items];this.selectedType&&(e=e.filter((e=>e.category===this.selectedType))),this.selectedWarehouse&&(t=t.filter((e=>e.warehouse===this.selectedWarehouse))),this.selectedType&&(t=t.filter((e=>e.category===this.selectedType))),""!==this.searchQuery&&(e=e.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))),this.items=e,this.low_stock_items=t,this.updateChartLow(),this.updateChartTop10()},sameWarehouse(e){if(0===e.length)return!1;const t=e[0].warehouse;for(let a=1;a<e.length;a++)if(e[a].warehouse!==t)return!1;return!0},createEntryTransaction(){const e=this.selectedItems.map((e=>({item_id:e.general_code,name:e.name})));this.$store.commit("setSelectedItems",e),this.$store.commit("setWarehouse",this.selectedItems[0].warehouseComplete);const t=this.selectedItems[0].warehouse;this.$router.push({name:"Entry-from-home",params:{warehouse:t}})},updateChartTop10(){if(this.chartTop10){const e=[...this.items].sort(((e,t)=>t.removals-e.removals)),t=e.map((e=>e.name)),a=e.map((e=>e.removals));this.chartTop10.data.labels=t,this.chartTop10.data.datasets[0].data=a,this.chartTop10.update()}},updateChartLow(){if(this.chartLow){const e=[...this.low_stock_items].sort(((e,t)=>e.storing_format_units-t.storing_format_units)),t=e.map((e=>e.name)),a=e.map((e=>e.storing_format_units)),s=e.map((e=>e.minimal_stock));this.chartLow.data.labels=t,this.chartLow.data.datasets[0].data=a,this.chartLow.data.datasets[1].data=s,this.chartLow.update()}}}},le=a(89);const ce=(0,le.Z)(ie,[["render",ee],["__scopeId","data-v-92984092"]]);var de=ce,ue=a.p+"img/usuario.4bbfa617.png";const me=e=>((0,c.dD)("data-v-5ba738e4"),e=e(),(0,c.Cn)(),e),he={class:"container"},_e={class:"row justify-content-center"},ge={class:"col-md-6"},pe={class:"card",style:{"border-radius":"15px"}},be={class:"card-body text-center"},fe=me((()=>(0,c._)("div",{class:"logo-container"},[(0,c._)("img",{src:ue,alt:"Logo",class:"logo"})],-1))),ve={class:"mb-3"},ye={class:"form-group"},we=me((()=>(0,c._)("label",{for:"email"},"Email:",-1))),ke=["value"],Ce={class:"form-group mt-4"},xe=me((()=>(0,c._)("label",{for:"currentPassword"},"Contraseña actual:",-1))),De={class:"form-group mt-4"},Ie=me((()=>(0,c._)("label",{for:"newPassword"},"Nueva contraseña:",-1))),Oe={class:"form-group mt-4"},Se=me((()=>(0,c._)("label",{for:"passwordConfirmation"},"Confirmar nueva contraseña:",-1))),Ae=me((()=>(0,c._)("div",{class:"mt-4"},[(0,c._)("button",{type:"submit",class:"btn btn-primary btn-block"}," Cambiar contraseña ")],-1)));function Ve(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",he,[(0,c._)("div",_e,[(0,c._)("div",ge,[(0,c._)("div",pe,[(0,c._)("div",be,[fe,(0,c._)("h4",ve,"Hola de nuevo, "+(0,d.zw)(o.user.name),1),(0,c._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>r.changePassword&&r.changePassword(...e)),["prevent"]))},[(0,c._)("div",ye,[we,(0,c._)("input",{type:"email",id:"email",class:"form-control",value:o.user.email,readonly:""},null,8,ke)]),(0,c._)("div",Ce,[xe,(0,c.wy)((0,c._)("input",{type:"password",id:"currentPassword",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.current_password=e)},null,512),[[s.nr,o.current_password]])]),(0,c._)("div",De,[Ie,(0,c.wy)((0,c._)("input",{type:"password",id:"newPassword",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>o.new_password=e)},null,512),[[s.nr,o.new_password]])]),(0,c._)("div",Oe,[Se,(0,c.wy)((0,c._)("input",{type:"password",id:"passwordConfirmation",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>o.new_password_confirmation=e)},null,512),[[s.nr,o.new_password_confirmation]])]),Ae],32)])])])])])],64)}var $e={name:"MyComponent",data(){return{user:{},current_password:"",new_password:"",new_password_confirmation:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},changePassword(){if(this.new_password===this.new_password_confirmation){const e={headers:{Authorization:this.sessionToken}},t={email:this.user.email,current_password:this.current_password,new_password:this.new_password,password_confirmation:this.new_password_confirmation};ae.Z.put(`${se}/users/password`,t,e).then((e=>{ne.Am.success("Contraseña actualizada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)})).catch((e=>{ne.Am.error("No se pudo actualizar la contraseña",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)}))}else ne.Am.error("Las contraseñas no coinciden",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}},mounted(){this.$state.navbarTitle="Perfil de usuario",this.user=JSON.parse(localStorage.getItem("user")),this.checked=this.checkboxValue,this.sessionToken=localStorage.getItem("sessionToken")}};const Te=(0,le.Z)($e,[["render",Ve],["__scopeId","data-v-5ba738e4"]]);var Ue=Te;const Le={key:0};function je(e,t,a,s,n,o){const r=(0,c.up)("navbar"),i=(0,c.up)("sidebar"),l=(0,c.up)("router-view");return(0,c.wg)(),(0,c.iD)(c.HY,null,[o.isLoggedIn?((0,c.wg)(),(0,c.iD)("div",Le,[(0,c.Wm)(r),(0,c.Wm)(i)])):(0,c.kq)("",!0),(0,c.Wm)(l)],64)}const ze={class:"sidebar"},Ee=["id","href","title","onClick"],We={id:"desktopText"},He=(0,c._)("input",{type:"checkbox",id:"checkElements"},null,-1),Be=(0,c._)("label",{for:"checkElements"},[(0,c._)("i",{class:"fas fa-times",id:"cancelElements"},[(0,c._)("i",{class:"bi bi-arrow-return-left"})])],-1),Fe={id:"sidebarElements",class:"sidebarElements"},Me=["id","onClick"],Ze={id:"option"};function Pe(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ze,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.pages,((e,t)=>((0,c.wg)(),(0,c.iD)("a",{id:e.link.id,key:t,class:(0,d.C_)({active:o.activePage===t}),href:`./${e.link.linkTo}`,title:`Ir a la página de ${e.link.title}`,onClick:[t=>r.manageClick(e.link.id,e.link.linkTo),(0,s.iM)((e=>o.activePage=t),["prevent"])]},[(0,c._)("i",{id:"mobileIcon",class:(0,d.C_)(e.link.bootstrapIcon.class)},[(0,c._)("span",null,(0,d.zw)(e.link.text),1)],2),(0,c._)("span",We,[(0,c._)("i",{id:"desktopIcon",class:(0,d.C_)(e.link.bootstrapIcon.class)},null,2),(0,c.Uk)(" "+(0,d.zw)(e.link.text),1)])],10,Ee)))),128))]),He,Be,(0,c._)("div",Fe,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.adminElementsList,((e,t)=>((0,c.wg)(),(0,c.iD)("a",{id:e.element,key:t,class:(0,d.C_)({active:o.activePage===t}),onClick:[t=>r.performElementsAction(e.urlParam),(0,s.iM)((e=>o.activePage=t),["prevent"])]},[(0,c._)("span",Ze,[(0,c._)("i",{class:(0,d.C_)(e.bootstrapIconClass)},null,2),(0,c.Uk)(" "+(0,d.zw)(e.element),1)])],10,Me)))),128))])],64)}var Ne=a(2492),qe=a.n(Ne),Re={data(){return{token:"",limit:700,screenWidth:0,screenHeight:0,isDesktop:!1,activePage:0,pages:[{link:{id:"home",text:"Inicio",title:"inicio",linkTo:"home",bootstrapIcon:{class:"bi bi-house-fill"}}},{link:{id:"inventario",text:"Consulta de Inventario",title:"consulta de inventario",linkTo:"inventory",bootstrapIcon:{class:"bi bi-box-seam"}}},{link:{id:"entrada",text:"Entradas de Inventario",title:"entradas de inventario",linkTo:"entry",bootstrapIcon:{class:"bi bi-box-arrow-in-left"}}},{link:{id:"salida",text:"Salidas de Inventario",title:"salidas de inventario",linkTo:"output",bootstrapIcon:{class:"bi bi-box-arrow-right"}}},{link:{id:"transferencia",text:"Transferencias de Inventario",title:"Transferencias de inventario",linkTo:"transfer",bootstrapIcon:{class:"bi bi-arrow-left-right"}}},{link:{id:"usuarios",text:"Administrar usuarios",title:"administrar usuarios",linkTo:"users",bootstrapIcon:{class:"bi bi-people-fill"}}},{link:{id:"transactions",text:"Registro de movimientos",title:"registro de movimientos",linkTo:"transactions",bootstrapIcon:{class:"bi bi-folder-fill"}}},{link:{id:"administrarElementos",text:"Catalogo",title:"administrar elementos",linkTo:"adminElementos",bootstrapIcon:{class:"bi bi-pencil-square"}}},{link:{id:"administrarUsuario",text:"Adiministrar usuario",title:"administrar usuario",linkTo:"userProfile",bootstrapIcon:{class:"bi bi-person-circle"}}},{link:{id:"exit-item",text:"Cerrar sesión",title:"Salir",linkTo:"login",bootstrapIcon:{class:"bi bi-door-closed-fill"}}}],adminElementsList:[{element:"Artículo",bootstrapIconClass:"bi bi-bag-fill",urlParam:"items"},{element:"Categoría",bootstrapIconClass:"bi bi-bookmark-fill",urlParam:"categories"},{element:"Subcategoría",bootstrapIconClass:"bi bi-bookmarks-fill",urlParam:"subcategories"},{element:"Diseño",bootstrapIconClass:"bi bi-brush-fill",urlParam:"designs"},{element:"Marca",bootstrapIconClass:"bi bi-tag-fill",urlParam:"brands"},{element:"Bodega",bootstrapIconClass:"bi bi-buildings-fill",urlParam:"warehouses"}]}},mounted(){this.token=localStorage.getItem("sessionToken")},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},created(){this.updateScreenSize(),window.addEventListener("resize",this.updateScreenSize)},unmounted(){window.removeEventListener("resize",this.updateScreenSize)},methods:{manageClick(e,t){"exit-item"===e?this.logout():this.action(t)},logout(){qe().fire({icon:"question",title:"Cerrar sesión",text:"¿Estás seguro de que deseas cerrar sesión?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then((e=>{if(e.isConfirmed){const e={headers:{Authorization:`${this.token}`}};ae.Z.delete(`${se}/users/sign_out`,e).then((e=>{console.log(e)})).catch((e=>{console.log(e)})),localStorage.removeItem("token"),this.$store.commit("setLoggedIn",!1),this.$router.push("/login")}}))},...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},updateScreenSize(){this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.Desktop()},Desktop(){this.isDesktop=this.screenWidth>=this.limit},action(e){"adminElementos"===e?document.getElementById("checkElements").checked=!0:this.$router.push("/"+e)},performElementsAction(e){this.$router.push("/"+e),document.getElementById("checkElements").checked=!1}}};const Ke=(0,le.Z)(Re,[["render",Pe]]);var Ye=Ke,Qe=a.p+"img/logo_telas.cfcaff10.jpg";const Ge={class:"nav-wrapper",style:{height:"110px"}},Je=(0,c._)("div",{class:"burger-container"},[(0,c._)("label",{for:"check"},[(0,c._)("i",{class:"fas fa-bars",id:"btn"},[(0,c._)("i",{class:"bi bi-list"})])])],-1),Xe={class:"logo-container"},et={id:"titleForMobile-container"},tt={class:"navbar-title",id:"titleForMobile"},at={class:"title-wrapper"},st={class:"navbar-title"},nt={class:"logo-usuario-container"};function ot(e,t,a,s,n,o){return(0,c.wg)(),(0,c.iD)("div",Ge,[(0,c._)("nav",{class:(0,d.C_)(["navbar navbar-expand-lg",{sticky:n.isSticky}])},[Je,(0,c._)("div",Xe,[(0,c._)("img",{id:"logotelas",src:Qe,onClick:t[0]||(t[0]=e=>o.NavigateToAnotherPage("home")),alt:"logo"}),(0,c._)("div",et,[(0,c._)("h1",tt,(0,d.zw)(e.$state.navbarTitle),1)])]),(0,c._)("div",at,[(0,c._)("h1",st,(0,d.zw)(e.$state.navbarTitle),1)]),(0,c._)("div",nt,[(0,c._)("i",{id:"logousuario",class:"bi bi-person-circle",onClick:t[1]||(t[1]=e=>o.NavigateToAnotherPage("userProfile"))})])],2)])}var rt={data(){return{isSticky:!1,showWarehouseDropdown:!1,selectedWarehouse:null,warehouses:""}},mounted(){ae.Z.get(se+"/warehouses").then((e=>{this.warehouses=e.data})),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{NavigateToAnotherPage(e){this.$router.push("/"+e)},toggleWarehouseDropdown(){this.showWarehouseDropdown=!this.showWarehouseDropdown},selectWarehouse(e){this.selectedWarehouse=e,this.showWarehouseDropdown=!1},updateNavbarTitle(e){this.$store.commit("updateNavbarTitle",e)},handleScroll(){this.isSticky=window.scrollY>0}}};const it=(0,le.Z)(rt,[["render",ot]]);var lt=it,ct={name:"App",components:{sidebar:Ye,navbar:lt},data(){return{username:"",password:""}},mounted(){},computed:{isLoggedIn(){return this.$store.state.isLoggedIn}},methods:{}};const dt=(0,le.Z)(ct,[["render",je]]);var ut=dt;const mt=e=>((0,c.dD)("data-v-30468b57"),e=e(),(0,c.Cn)(),e),ht={class:"container"},_t={key:0},gt=mt((()=>(0,c._)("div",{class:"modal-background"},null,-1))),pt={class:"modal-content container-md",style:{"z-index":"1"}},bt=mt((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),ft={class:"search-container"},vt=mt((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),yt={class:"table-container",style:{"max-height":"500px !important"}},wt={class:"table table-bordered"},kt=mt((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),Ct={class:"text-center"},xt={class:"text-center"},Dt={class:"text-center",style:{width:"10px"}},It=["id","value","onChange"],Ot={class:"d-flex justify-content-center btn-group"},St={class:"document-header"},At={class:"header-row"},Vt=mt((()=>(0,c._)("h1",{class:"text-center mb-5"},"Entrada",-1))),$t={class:"ms-0"},Tt={class:"row mb-lg-5",style:{"justify-content":"center","align-items":"center",display:"flex"}},Ut={class:"col-2"},Lt=["hidden"],jt=["hidden"],zt=mt((()=>(0,c._)("option",{disabled:"",value:""},"Seleccionar",-1))),Et=["value"],Wt=["hidden"],Ht=mt((()=>(0,c._)("h4",{style:{"margin-top":"30px"}},"Lista de Artículos",-1))),Bt={class:"table-container",style:{"max-height":"500px !important"}},Ft={class:"table table-bordered"},Mt=mt((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"}),(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"}," Cantidad en unidades de inventario a agregar "),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de venta a agregar"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Zt=["id","onUpdate:modelValue","onKeydown"],Pt=["id","onUpdate:modelValue","onKeydown"],Nt={class:"text-center"},qt=["id","onUpdate:modelValue","onInput"],Rt={class:"text-center"},Kt={class:"text-center"},Yt=["onUpdate:modelValue","onInput"],Qt={class:"text-center"},Gt={class:"text-center"},Jt=["onClick"],Xt={class:"observations-section mt-4"},ea=mt((()=>(0,c._)("h4",null,"Observaciones",-1))),ta={class:"form-footer text-center"};function aa(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),type:"checkbox",onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ht,[(0,c._)("div",null,[o.modalVisible?((0,c.wg)(),(0,c.iD)("div",_t,[gt,(0,c._)("div",pt,[bt,(0,c._)("div",ft,[vt,(0,c.wy)((0,c._)("input",{id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),class:"form-control",type:"text",onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"]))},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e))},"Buscar")]),(0,c._)("div",yt,[(0,c._)("table",wt,[kt,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",Ct,(0,d.zw)(e.general_code),1),(0,c._)("td",xt,(0,d.zw)(e.name),1),(0,c._)("td",Dt,[(0,c.wy)((0,c._)("input",{id:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.selectedItems=e),value:e,class:"form-check-input",type:"checkbox",onChange:t=>r.handleItemCheckboxChange(e)},null,40,It),[[s.e8,o.selectedItems]])])],2)))),128))])])]),(0,c._)("div",Ot,[(0,c._)("button",{class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e))},"Cerrar"),(0,c._)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e))}," Agregar ")])])])):(0,c.kq)("",!0)]),(0,c._)("div",St,[(0,c._)("div",At,[Vt,(0,c._)("div",$t,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(this.$store.state.user.name),1),(0,c._)("div",Tt,[(0,c._)("div",Ut,[(0,c._)("label",{hidden:e.selectDisabled,for:"warehouseSelect"},"Bodega:",8,Lt)]),(0,c._)("div",{hidden:e.selectDisabled,class:"col-10"},[(0,c.wy)((0,c._)("select",{id:"warehouseSelect","onUpdate:modelValue":t[8]||(t[8]=e=>o.selectedWarehouse=e),class:"form-select ms-2"},[zt,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.warehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e},(0,d.zw)(e.name),9,Et)))),128))],512),[[s.bM,o.selectedWarehouse]])],8,jt)]),(0,c._)("div",null,[(0,c._)("label",{hidden:!e.selectDisabled},"Bodega seleccionada: "+(0,d.zw)(o.selectedWarehouse.name),9,Wt)])])])]),Ht,(0,c._)("button",{id:"searchArticleButton",class:"btn btn-success",onClick:t[9]||(t[9]=e=>r.openSearchMenu())}," Buscar "),(0,c._)("div",Bt,[(0,c._)("table",Ft,[Mt,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,(0,d.zw)(t+1),1),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,"onUpdate:modelValue":t=>e.general_code=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"general_code",a,t)),["tab"])},null,40,Zt),[[s.nr,e.general_code]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"NA"+t,"onUpdate:modelValue":t=>e.name=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"name",a,t)),["tab"])},null,40,Pt),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",Nt,[(0,c.wy)((0,c._)("input",{id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"storing_format_units",t)},null,40,qt),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Rt,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Kt,[(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":t=>e.transferring_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"transferring_format_units",t)},null,40,Yt),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Qt,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Gt,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,Jt)])],2)))),128))])])]),(0,c._)("div",Xt,[ea,(0,c.wy)((0,c._)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.notes=e),class:"form-control"},null,512),[[s.nr,o.notes]])]),(0,c._)("div",ta,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[11]||(t[11]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar "),(0,c.Wm)(i,{class:"btn btn-danger btn-save",to:"#",type:"button",onClick:t[12]||(t[12]=e=>r.goToPreviousPage())},{default:(0,c.w5)((()=>[(0,c.Uk)(" Volver ")])),_:1})])])],64)}var sa={data(){return{tableData:[],filteredItems:[],inventory_items:[],warehouses:[],modalVisible:!1,selectedWarehouse:"",selectedItems:[],notes:""}},mounted(){if(this.$state.navbarTitle="Entradas de inventario",document.addEventListener("keydown",this.handleKeyDown),ae.Z.get(`${se}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)})),this.addItem(),window.location.href.includes("Entry-from-home")){this.selectedWarehouse=this.$store.state.warehouseSend,this.selectDisabled=!0;let e=this.$store.state.selectedItems;for(let t=0;t<e.length;t++){let a={};a.general_code=e[t].item_id,a.name=e[t].name,this.addItem(0,a)}this.$store.commit("setSelectedItems",{})}},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},updateWarehouse(e,t){e.warehouse=t},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){let a=null==t.general_code?t.id:t.general_code.trim(),s=null==t.name?t.name:t.name.trim();if(a=encodeURIComponent(a),s=encodeURIComponent(s),""!==a){let n=`${se}/find_inventory_item?`;""!==a&&(n+=`general_code=${a}&name=${s}&warehouse_id=${this.selectedWarehouse.id}`),ae.Z.get(n).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.general_code=s.general_code||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",t.storing_format_units="",t.transferring_format_units="",t.id=s.id||"",t.current_stock_storing_units=s.storing_format_units,t.current_stock_transferring_units=s.transferring_format_units,this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ne.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){let e=void 0===this.searchQuery?"":this.searchQuery.trim();if(e=encodeURIComponent(e),""!==e){const t=`${se}/search_inventory_items/?data=${e}&warehouse=${this.selectedWarehouse.id}`;ae.Z.get(t).then((e=>{this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"!==a.key||"general_code"!==t&&"name"!==t?"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.selectedWarehouse?ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key?this.saveTransaction():"Escape"===a.key&&this.closeModal():e!==this.tableData[0]||"general_code"!==t&&"name"!==t||(""!==e.general_code.trim()&&""!==e.name.trim()?this.addItem(s,e):ne.Am.info("Debe llenarse el campo del código y del nombre del artículo",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}))},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.general_code.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.selectedWarehouse)ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.forEach((e=>{if(!this.checkUnits(e))return ne.Am.info("Debe ingresar las unidades de almacenamiento a todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),""})),this.inventory_items.length>0){const e=`${se}/inventories/insert_items`,t={inventory_items:this.inventory_items,currentDate:this.getCurrentDate(),warehouse_id:this.selectedWarehouse?this.selectedWarehouse.id:null,user:this.$store.state.user.id,notes:this.notes};ae.Z.post(e,t).then((()=>{ne.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[],this.addItem(),this.notes="",this.selectedWarehouse=""})).catch((e=>{ne.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ne.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&""!==this.selectedWarehouse?this.showModal():"Escape"===e.key?this.closeModal():"Enter"!==e.key||""===this.selectedWarehouse||this.modalVisible?e.shiftKey&&"Tab"===e.key&&""===this.selectedWarehouse&&ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):this.saveTransaction()},openSearchMenu(){""===this.selectedWarehouse?console.log("Debe seleccionar un almacén"):this.showModal()},goToPreviousPage(){this.$router.go(-1)}}};const na=(0,le.Z)(sa,[["render",aa],["__scopeId","data-v-30468b57"]]);var oa=na;const ra=e=>((0,c.dD)("data-v-e91325f6"),e=e(),(0,c.Cn)(),e),ia={class:"container"},la={key:0},ca=ra((()=>(0,c._)("div",{class:"modal-background"},null,-1))),da={class:"modal-content container-md",style:{"z-index":"1"}},ua=ra((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),ma={class:"search-container"},ha=ra((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),_a={class:"table-container",style:{"max-height":"500px !important"}},ga={class:"table table-bordered"},pa=ra((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),ba={class:"text-center"},fa={class:"text-center"},va={class:"text-center",style:{width:"10px"}},ya=["id","value","onChange"],wa={class:"d-flex justify-content-center btn-group"},ka={class:"document-header"},Ca={class:"header-row"},xa=ra((()=>(0,c._)("h1",{class:"text-center mb-5"},"Transferencia",-1))),Da={class:"ms-0"},Ia={class:"row mb-lg-5",style:{"justify-content":"center","align-items":"center"}},Oa=ra((()=>(0,c._)("div",{class:"col-2"},[(0,c._)("label",{for:"senderWarehouse"},"Bodega de origen:")],-1))),Sa={class:"col-10"},Aa=ra((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar",-1))),Va=["value"],$a=ra((()=>(0,c._)("div",{class:"col-2 mt-2"},[(0,c._)("label",{for:"receiverWarehouse"},"Bodega de destino:")],-1))),Ta={class:"col-10 mt-2"},Ua=ra((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar",-1))),La=["value"],ja=ra((()=>(0,c._)("h4",{style:{"margin-top":"30px"}},"Lista de Artículos",-1))),za={class:"table-container"},Ea={class:"table table-hover"},Wa=ra((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"}),(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"}," Cantidad en unidades de inventario a transferir "),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"}," Cantidad en unidades de venta a transferir "),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Ha=["id","onUpdate:modelValue","onKeydown"],Ba=["id","onUpdate:modelValue","onKeydown"],Fa={class:"text-center"},Ma=["id","onUpdate:modelValue","onInput"],Za={class:"text-center"},Pa={class:"text-center"},Na=["onUpdate:modelValue","onInput"],qa={class:"text-center"},Ra={class:"text-center"},Ka=["onClick"],Ya={class:"observations-section mt-4"},Qa=ra((()=>(0,c._)("h4",null,"Observaciones",-1))),Ga={class:"form-footer text-center"};function Ja(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ia,[(0,c._)("div",null,[o.modalVisible?((0,c.wg)(),(0,c.iD)("div",la,[ca,(0,c._)("div",da,[ua,(0,c._)("div",ma,[ha,(0,c.wy)((0,c._)("input",{id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),class:"form-control",type:"text",onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"]))},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e))},"Buscar")]),(0,c._)("div",_a,[(0,c._)("table",ga,[pa,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",ba,(0,d.zw)(e.general_code),1),(0,c._)("td",fa,(0,d.zw)(e.name),1),(0,c._)("td",va,[(0,c.wy)((0,c._)("input",{id:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.selectedItems=e),value:e,class:"form-check-input",type:"checkbox",onChange:t=>r.handleItemCheckboxChange(e)},null,40,ya),[[s.e8,o.selectedItems]])])],2)))),128))])])]),(0,c._)("div",wa,[(0,c._)("button",{class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e))},"Cerrar"),(0,c._)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e))}," Agregar ")])])])):(0,c.kq)("",!0)]),(0,c._)("div",ka,[(0,c._)("div",Ca,[xa,(0,c._)("div",Da,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(e.user.name),1),(0,c._)("div",Ia,[Oa,(0,c._)("div",Sa,[(0,c.wy)((0,c._)("select",{id:"senderWarehouse",class:"form-select ms-2","onUpdate:modelValue":t[8]||(t[8]=e=>o.senderWarehouse=e)},[Aa,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSenderWarehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e,key:e.id},(0,d.zw)(e.name),9,Va)))),128))],512),[[s.bM,o.senderWarehouse]])]),$a,(0,c._)("div",Ta,[(0,c.wy)((0,c._)("select",{id:"receiverWarehouse",class:"form-select ms-2","onUpdate:modelValue":t[9]||(t[9]=e=>o.receiverWarehouse=e)},[Ua,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredReceiverWarehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e,key:e.id},(0,d.zw)(e.name),9,La)))),128))],512),[[s.bM,o.receiverWarehouse]])])])])])]),ja,(0,c._)("button",{onClick:t[10]||(t[10]=e=>r.openSearchMenu()),id:"searchArticleButton",class:"btn btn-success"}," Buscar "),(0,c._)("div",za,[(0,c._)("table",Ea,[Wa,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,(0,d.zw)(t+1),1),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,type:"text","onUpdate:modelValue":t=>e.general_code=t,onKeydown:(0,s.D2)((a=>r.onCellInput(e,"general_code",a,t)),["tab"]),class:"form-control"},null,40,Ha),[[s.nr,e.general_code]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"NA"+t,"onUpdate:modelValue":t=>e.name=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"name",a,t)),["tab"])},null,40,Ba),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",Fa,[(0,c.wy)((0,c._)("input",{type:"number",id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,onInput:t=>r.onCellInput(e,"storing_format_units",t),class:"form-control"},null,40,Ma),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Za,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Pa,[(0,c.wy)((0,c._)("input",{type:"number","onUpdate:modelValue":t=>e.transferring_format_units=t,onInput:t=>r.onCellInput(e,"transferring_format_units",t),class:"form-control"},null,40,Na),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",qa,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Ra,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,Ka)])],2)))),128))])])]),(0,c._)("div",Ya,[Qa,(0,c.wy)((0,c._)("textarea",{class:"form-control","onUpdate:modelValue":t[11]||(t[11]=e=>o.notes=e)},null,512),[[s.nr,o.notes]])]),(0,c._)("div",Ga,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[12]||(t[12]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar "),(0,c.Wm)(i,{class:"btn btn-danger btn-save",to:"#",type:"button",onClick:t[13]||(t[13]=e=>r.goToPreviousPage())},{default:(0,c.w5)((()=>[(0,c.Uk)(" Volver ")])),_:1})])])])}var Xa={data(){return{tableData:[],filteredItems:[],inventory_items:[],warehouses:[],modalVisible:!1,senderWarehouse:"",receiverWarehouse:"",selectedItems:[],notes:""}},mounted(){this.$state.navbarTitle="Transferencia de inventario",document.addEventListener("keydown",this.handleKeyDown),ae.Z.get(`${se}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)})),this.addItem()},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},watch:{senderWarehouse:{handler(e){e&&this.updateStockValuesForWarehouse()},deep:!0}},computed:{...(0,r.rn)(["checkboxValue","user"]),checked:{get(){return this.checkboxValue}},filteredSenderWarehouses(){return this.filterWarehouses("sender")},filteredReceiverWarehouses(){return this.filterWarehouses("receiver")}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),filterWarehouses(e){return"sender"===e?this.warehouses.filter((e=>e!==this.receiverWarehouse)):"receiver"===e?this.warehouses.filter((e=>e!==this.senderWarehouse)):this.warehouses},handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){let a=null==t.general_code?t.id:t.general_code.trim(),s=null==t.name?t.name:t.name.trim();if(a=encodeURIComponent(a),s=encodeURIComponent(s),""!==a){let n=`${se}/find_inventory_item?`;""!==a&&(n+=`general_code=${a}&name=${s}&warehouse_id=${this.senderWarehouse.id}`),ae.Z.get(n).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.general_code=s.general_code||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",t.storing_format_units="",t.transferring_format_units="",t.id=s.id||"",t.current_stock_storing_units=s.storing_format_units,t.current_stock_transferring_units=s.transferring_format_units,this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ne.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){let e=void 0===this.searchQuery?"":this.searchQuery.trim();if(e=encodeURIComponent(e),""!==e){const t=`${se}/search_inventory_items/?data=${e}&warehouse=${this.senderWarehouse.id}`;ae.Z.get(t).then((e=>{this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"!==a.key||"general_code"!==t&&"name"!==t?"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.receiverWarehouse?ne.Am.info("Debe seleccionar un almacén de destino",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key?this.saveTransaction():"Escape"===a.key&&this.closeModal():e!==this.tableData[0]||"general_code"!==t&&"name"!==t||(""!==e.general_code.trim()&&""!==e.name.trim()?this.addItem(s,e):ne.Am.info("Debe llenarse el campo del código y del nombre del artículo",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}))},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},openSearchMenu(){this.showModal()},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.general_code.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.senderWarehouse||""===this.receiverWarehouse)ne.Am.info("Debe seleccionar los almacenes de origen y de destino",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.length>0){const e={};for(const d of this.inventory_items){if(!this.checkUnits(d))return void ne.Am.info("Debe ingresar las unidades de almacenamiento y venta para todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const t=parseFloat(d.storing_format_units),a=parseFloat(d.transferring_format_units),s=d.current_stock_storing_units;if(t>s)return void ne.Am.info(`La cantidad de unidades de almacenamiento a remover para el artículo "${d.name}" con código "${d.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const n=d.current_stock_transferring_units;if(a>n)return void ne.Am.info(`La cantidad de unidades de venta a remover para el artículo "${d.name}" con código "${d.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const o=d.item_id;if(e[o]?(e[o].storing+=t,e[o].transferring+=a):e[o]={storing:t,transferring:a},e[o].storing>s||e[o].transferring>n)return void ne.Am.info(`La cantidad total de unidades a remover para el artículo "${d.name}" con código "${d.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}const t=`${se}/inventories/transfer_items`,a=this.getCurrentDate(),s=this.getCurrentTime(),n=this.user.id,o=this.notes,r=this.senderWarehouse.id,i=this.receiverWarehouse.id,l=this.inventory_items.map((e=>({item_id:e.item_id,name:e.name,storing_format_units:e.storing_format_units,storing_unit_format_name:e.storing_unit_format_name,transferring_format_units:e.transferring_format_units,transferring_unit_format_name:e.transferring_unit_format_name}))),c={inventory_items:l,currentDate:a,currentTime:s,userId:n,notes:o,sourceWarehouse_Id:r,destinationWarehouse_Id:i};ae.Z.post(t,c).then((e=>{console.log(e),ne.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}],this.tableData=[],this.addItem(),this.notes="",this.receiverWarehouse="",this.senderWarehouse=""})).catch((e=>{ne.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ne.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},updateStockValuesForWarehouse(){if(!this.senderWarehouse||0===this.tableData.length)return;const e=this.tableData.map((e=>e.item_id)),t=`${se}/inventories/get_stock_by_warehouse/${this.senderWarehouse.id}`;ae.Z.get(t,{itemIds:e}).then((e=>{const t=e.data;this.tableData.forEach((e=>{const a=t.find((t=>t.item_id===e.id));a&&(e.current_stock_storing_units=a.storing_format_units,e.current_stock_transferring_units=a.transferring_format_units)}))})).catch((e=>{console.error("Error al obtener los datos de stock: ",e)}))},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&""!==this.senderWarehouse&&""!==this.receiverWarehouse?this.showModal():"Escape"===e.key?this.closeModal():"Enter"!==e.key||""===this.senderWarehouse||""===this.receiverWarehouse||this.modalVisible?!e.shiftKey||"Tab"!==e.key||""!==this.senderWarehouse&&""!==this.receiverWarehouse||ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):this.saveTransaction()},goToPreviousPage(){this.$router.go(-1)}}};const es=(0,le.Z)(Xa,[["render",Ja],["__scopeId","data-v-e91325f6"]]);var ts=es;const as=e=>((0,c.dD)("data-v-56009bfe"),e=e(),(0,c.Cn)(),e),ss={class:"container"},ns={key:0},os=as((()=>(0,c._)("div",{class:"modal-background"},null,-1))),rs={class:"modal-content container-md",style:{"z-index":"1"}},is=as((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),ls={class:"search-container"},cs=as((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),ds={class:"table-container",style:{"max-height":"500px !important"}},us={class:"table table-bordered"},ms=as((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),hs={class:"text-center"},_s={class:"text-center"},gs={class:"text-center",style:{width:"10px"}},ps=["id","value","onChange"],bs={class:"d-flex justify-content-center btn-group"},fs={class:"document-header"},vs={class:"header-row"},ys=as((()=>(0,c._)("h1",{class:"text-center mb-5"},"Salida",-1))),ws={class:"ms-0"},ks={class:"row mb-lg-5",style:{"justify-content":"center","align-items":"center",display:"flex"}},Cs={class:"col-2"},xs=["hidden"],Ds=["hidden"],Is=as((()=>(0,c._)("option",{disabled:"",value:""},"Seleccionar",-1))),Os=["value"],Ss=["hidden"],As=as((()=>(0,c._)("h4",{style:{"margin-top":"30px"}},"Lista de Artículos",-1))),Vs={class:"table-container",style:{"max-height":"500px !important"}},$s={class:"table table-bordered"},Ts=as((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"}),(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"}," Cantidad en unidades de inventario a remover "),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"}," Cantidad en unidades de venta a remover "),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Us=["id","onUpdate:modelValue","onKeydown"],Ls=["id","onUpdate:modelValue","onKeydown"],js={class:"text-center"},zs=["id","onUpdate:modelValue","onInput"],Es={class:"text-center"},Ws={class:"text-center"},Hs=["onUpdate:modelValue","onInput"],Bs={class:"text-center"},Fs={class:"text-center"},Ms=["onClick"],Zs={class:"observations-section mt-4"},Ps=as((()=>(0,c._)("h4",null,"Observaciones",-1))),Ns={class:"form-footer text-center"};function qs(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),type:"checkbox",onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ss,[(0,c._)("div",null,[o.modalVisible?((0,c.wg)(),(0,c.iD)("div",ns,[os,(0,c._)("div",rs,[is,(0,c._)("div",ls,[cs,(0,c.wy)((0,c._)("input",{id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),class:"form-control",type:"text",onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"]))},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e))},"Buscar")]),(0,c._)("div",ds,[(0,c._)("table",us,[ms,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",hs,(0,d.zw)(e.general_code),1),(0,c._)("td",_s,(0,d.zw)(e.name),1),(0,c._)("td",gs,[(0,c.wy)((0,c._)("input",{id:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.selectedItems=e),value:e,class:"form-check-input",type:"checkbox",onChange:t=>r.handleItemCheckboxChange(e)},null,40,ps),[[s.e8,o.selectedItems]])])],2)))),128))])])]),(0,c._)("div",bs,[(0,c._)("button",{class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e))},"Cerrar"),(0,c._)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e))}," Agregar ")])])])):(0,c.kq)("",!0)]),(0,c._)("div",fs,[(0,c._)("div",vs,[ys,(0,c._)("div",ws,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(this.$store.state.user.name),1),(0,c._)("div",ks,[(0,c._)("div",Cs,[(0,c._)("label",{hidden:e.selectDisabled,for:"warehouseSelect"},"Bodega:",8,xs)]),(0,c._)("div",{hidden:e.selectDisabled,class:"col-10"},[(0,c.wy)((0,c._)("select",{id:"warehouseSelect","onUpdate:modelValue":t[8]||(t[8]=e=>o.selectedWarehouse=e),class:"form-select ms-2"},[Is,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.warehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e},(0,d.zw)(e.name),9,Os)))),128))],512),[[s.bM,o.selectedWarehouse]])],8,Ds)]),(0,c._)("div",null,[(0,c._)("label",{hidden:!e.selectDisabled},"Bodega seleccionada: "+(0,d.zw)(o.selectedWarehouse.name),9,Ss)])])])]),As,(0,c._)("button",{id:"searchArticleButton",class:"btn btn-success",onClick:t[9]||(t[9]=e=>r.openSearchMenu())}," Buscar "),(0,c._)("div",Vs,[(0,c._)("table",$s,[Ts,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,(0,d.zw)(t+1),1),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,"onUpdate:modelValue":t=>e.general_code=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"general_code",a,t)),["tab"])},null,40,Us),[[s.nr,e.general_code]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"NA"+t,"onUpdate:modelValue":t=>e.name=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"name",a,t)),["tab"])},null,40,Ls),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",js,[(0,c.wy)((0,c._)("input",{id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"storing_format_units",t)},null,40,zs),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Es,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Ws,[(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":t=>e.transferring_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"transferring_format_units",t)},null,40,Hs),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Bs,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Fs,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,Ms)])],2)))),128))])])]),(0,c._)("div",Zs,[Ps,(0,c.wy)((0,c._)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.notes=e),class:"form-control"},null,512),[[s.nr,o.notes]])]),(0,c._)("div",Ns,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[11]||(t[11]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar "),(0,c.Wm)(i,{class:"btn btn-danger btn-save",to:"#",type:"button",onClick:t[12]||(t[12]=e=>r.goToPreviousPage())},{default:(0,c.w5)((()=>[(0,c.Uk)(" Volver ")])),_:1})])])],64)}var Rs={data(){return{tableData:[],filteredItems:[],inventory_items:[],warehouses:[],modalVisible:!1,selectedWarehouse:"",selectedItems:[],notes:""}},mounted(){this.$state.navbarTitle="Salidas de inventario",document.addEventListener("keydown",this.handleKeyDown),ae.Z.get(`${se}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)})),this.addItem()},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},watch:{selectedWarehouse:{handler(e){e&&this.updateStockValuesForWarehouse()},deep:!0}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},updateWarehouse(e,t){e.warehouse=t},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){let a=null==t.general_code?t.id:t.general_code.trim(),s=null==t.name?t.name:t.name.trim();if(s=encodeURIComponent(s),a=encodeURIComponent(a),""!==a){let n=`${se}/find_inventory_item?`;""!==a&&(n+=`general_code=${a}&name=${s}&warehouse_id=${this.selectedWarehouse.id}`),ae.Z.get(n).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.general_code=s.general_code||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",t.storing_format_units="",t.transferring_format_units="",t.id=s.id||"",t.current_stock_storing_units=s.storing_format_units,t.current_stock_transferring_units=s.transferring_format_units,this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ne.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",general_code:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){let e=void 0===this.searchQuery?"":this.searchQuery.trim();if(e=encodeURIComponent(e),""!==e){const t=`${se}/search_inventory_items/?data=${e}&warehouse=${this.selectedWarehouse.id}`;ae.Z.get(t).then((e=>{this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"!==a.key||"general_code"!==t&&"name"!==t?"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.selectedWarehouse?ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key?this.saveTransaction():"Escape"===a.key&&this.closeModal():e!==this.tableData[0]||"general_code"!==t&&"name"!==t||(""!==e.general_code.trim()&&""!==e.name.trim()?this.addItem(s,e):ne.Am.info("Debe llenarse el campo del código y del nombre del artículo",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}))},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.general_code.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.selectedWarehouse)ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.length>0){const e={};for(const s of this.inventory_items){if(!this.checkUnits(s))return void ne.Am.info("Debe ingresar las unidades de almacenamiento y venta para todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const t=parseFloat(s.storing_format_units),a=parseFloat(s.transferring_format_units),n=s.current_stock_storing_units;if(t>n)return void ne.Am.info(`La cantidad de unidades de almacenamiento a remover para el artículo "${s.name}" con código "${s.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const o=s.current_stock_transferring_units;if(a>o)return void ne.Am.info(`La cantidad de unidades de venta a remover para el artículo "${s.name}" con código "${s.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});const r=s.item_id;if(e[r]?(e[r].storing+=t,e[r].transferring+=a):e[r]={storing:t,transferring:a},e[r].storing>n||e[r].transferring>o)return void ne.Am.info(`La cantidad total de unidades a remover para el artículo "${s.name}" con código "${s.general_code}" supera el stock actual`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}const t=`${se}/inventories/remove_items`,a={inventory_items:this.inventory_items,currentDate:this.getCurrentDate(),warehouse_id:this.selectedWarehouse?this.selectedWarehouse.id:null,user:this.$store.state.user.id,notes:this.notes};ae.Z.post(t,a).then((()=>{ne.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[],this.addItem(),this.notes="",this.selectedWarehouse=""})).catch((e=>{ne.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ne.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},updateStockValuesForWarehouse(){if(!this.selectedWarehouse||0===this.tableData.length)return;const e=this.tableData.map((e=>e.item_id)),t=`${se}/inventories/get_stock_by_warehouse/${this.selectedWarehouse.id}`;ae.Z.get(t,{itemIds:e}).then((e=>{const t=e.data;this.tableData.forEach((e=>{const a=t.find((t=>t.item_id===e.id));a&&(e.current_stock_storing_units=a.storing_format_units,e.current_stock_transferring_units=a.transferring_format_units)}))})).catch((e=>{console.error("Error al obtener los datos de stock: ",e)}))},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&""!==this.selectedWarehouse?this.showModal():"Escape"===e.key?this.closeModal():"Enter"!==e.key||""===this.selectedWarehouse||this.modalVisible?e.shiftKey&&"Tab"===e.key&&""===this.selectedWarehouse&&ne.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):this.saveTransaction()},openSearchMenu(){""===this.selectedWarehouse?console.log("Debe seleccionar un almacén"):this.showModal()},goToPreviousPage(){this.$router.go(-1)}}};const Ks=(0,le.Z)(Rs,[["render",qs],["__scopeId","data-v-56009bfe"]]);var Ys=Ks;const Qs=e=>((0,c.dD)("data-v-62d6d515"),e=e(),(0,c.Cn)(),e),Gs={class:"container"},Js={class:"row"},Xs={id:"contentDiv",class:"col-lg-10 col-md-12"},en=Qs((()=>(0,c._)("div",{class:"row mb-lg-5"},[(0,c._)("h1",null,"Inventario en el Sistema")],-1))),tn={class:"row border rounded-3 p-3 mb-lg-5"},an=Qs((()=>(0,c._)("h4",{class:"filter-title"},"Filtros",-1))),sn={class:"filters-container",style:{display:"block","align-items":"center","justify-content":"center"}},nn={class:"row"},on={class:"col-md-2",style:{margin:"10px"}},rn={class:"form-group code"},ln=Qs((()=>(0,c._)("label",{for:"codigo"},"Código de Artículo:",-1))),cn={class:"col-md-2",style:{margin:"10px"}},dn={class:"form-group"},un=Qs((()=>(0,c._)("label",{for:"category"},"Categoría:",-1))),mn=Qs((()=>(0,c._)("option",{value:""},"Todas las categorías",-1))),hn=["value"],_n={class:"col-md-2",style:{margin:"10px"}},gn={class:"form-group"},pn=Qs((()=>(0,c._)("label",{for:"subcategory"},"Subcategoría:",-1))),bn=Qs((()=>(0,c._)("option",{value:""},"Todas las subcategorías",-1))),fn=["value"],vn={class:"col-md-2",style:{margin:"10px"}},yn={class:"form-group"},wn=Qs((()=>(0,c._)("label",{for:"design"},"Diseño:",-1))),kn=Qs((()=>(0,c._)("option",{value:""},"Todos los diseños",-1))),Cn=["value"],xn={class:"col-md-2",style:{margin:"10px"}},Dn={class:"form-group"},In=Qs((()=>(0,c._)("label",{for:"brand"},"Marca:",-1))),On=Qs((()=>(0,c._)("option",{value:""},"Todas las marcas",-1))),Sn=["value"],An={class:"row"},Vn={class:"mt-lg-4"},$n=Qs((()=>(0,c._)("div",{class:"row"},[(0,c._)("h3",null,"Tabla de Inventario de Artículos")],-1))),Tn={class:"row"},Un={class:"table-container",style:{"max-height":"700px !important"}},Ln={class:"table table-bordered"},jn=Qs((()=>(0,c._)("th",{class:"text-center"},"Código",-1))),zn=Qs((()=>(0,c._)("th",{class:"text-center"},"Nombre",-1))),En=Qs((()=>(0,c._)("th",{class:"text-center"},"Stock Total",-1))),Wn=Qs((()=>(0,c._)("th",{class:"text-center"},"Unidades",-1))),Hn={class:"text-center"},Bn=Qs((()=>(0,c._)("i",{class:"bi bi-caret-right-fill",style:{"margin-right":"2px"}},null,-1))),Fn={class:"text-center"};function Mn(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Gs,[(0,c._)("div",Js,[(0,c._)("div",Xs,[en,(0,c._)("div",tn,[an,(0,c._)("div",sn,[(0,c._)("div",nn,[(0,c._)("div",on,[(0,c._)("div",rn,[ln,(0,c.wy)((0,c._)("input",{type:"text",id:"codigo",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.filter.id=e),placeholder:"Código"},null,512),[[s.nr,o.filter.id]])])]),(0,c._)("div",cn,[(0,c._)("div",dn,[un,(0,c.wy)((0,c._)("select",{id:"category",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>o.filter.category=e),onChange:t[4]||(t[4]=e=>r.resetSubcategory())},[mn,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,hn)))),128))],544),[[s.bM,o.filter.category]])])]),(0,c._)("div",_n,[(0,c._)("div",gn,[pn,(0,c.wy)((0,c._)("select",{id:"subcategory",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>o.filter.subcategory=e)},[bn,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,fn)))),128))],512),[[s.bM,o.filter.subcategory]])])]),(0,c._)("div",vn,[(0,c._)("div",yn,[wn,(0,c.wy)((0,c._)("select",{id:"design",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>o.filter.design=e)},[kn,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.designs,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,Cn)))),128))],512),[[s.bM,o.filter.design]])])]),(0,c._)("div",xn,[(0,c._)("div",Dn,[In,(0,c.wy)((0,c._)("select",{id:"brand",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>o.filter.brand=e)},[On,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.brands,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,Sn)))),128))],512),[[s.bM,o.filter.brand]])])])]),(0,c._)("div",An,[(0,c._)("button",{class:"btn btn-secondary",style:{width:"200px",margin:"10px"},onClick:t[8]||(t[8]=e=>r.resetFilter("all"))}," Limpiar filtros ")])])]),(0,c._)("div",Vn,[$n,(0,c._)("div",Tn,[(0,c._)("div",Un,[(0,c._)("table",Ln,[(0,c._)("thead",null,[(0,c._)("tr",null,[jn,zn,En,Wn,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.warehouses,(e=>((0,c.wg)(),(0,c.iD)("th",{key:e.name,class:"text-center"}," Stock "+(0,d.zw)(e.name),1)))),128))])]),(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Hn,[Bn,(0,c.Wm)(i,{to:{name:"ArticleDetails",params:{id:e.id}},style:{"background-color":"transparent",color:"black","text-decoration":"none"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.general_code),1)])),_:2},1032,["to"])]),(0,c._)("td",Fn,(0,d.zw)(e.name),1),(0,c._)("td",{class:(0,d.C_)([{"text-danger":r.calculateStockUnits(e)<e.minimal_stock},"text-center"])},(0,d.zw)(r.calculateStockUnits(e).toFixed(1)),3),(0,c._)("td",{class:(0,d.C_)([{"text-danger":r.calculateStockUnits(e)<e.minimal_stock},"text-center"])},(0,d.zw)(e.storing_format_units_name),3),((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.inventory_items,(e=>((0,c.wg)(),(0,c.iD)("td",{key:e.id,class:"text-center"},(0,d.zw)(e.storing_format_units),1)))),128))])))),128))])])])])])])])])],64)}var Zn={name:"InventoryTable",data(){return{filter:{id:"",category:"",subcategory:"",design:"",brand:"",warehouse:""},items:[],categories:[],designs:[],brands:[],warehouses:[]}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){return this.categories.filter((e=>e.name===this.filter.category)).map((e=>e.subcategories)).flat()},filteredItems(){return this.items.filter((e=>e.general_code.toUpperCase().includes(this.filter.id.toUpperCase())&&(""===this.filter.category||e.category===this.filter.category)&&(""===this.filter.subcategory||e.subcategory===this.filter.subcategory)&&(""===this.filter.design||e.design&&e.design.name===this.filter.design)&&(""===this.filter.brand||e.brand&&e.brand.name===this.filter.brand)&&(""===this.filter.warehouse||e.warehouse===this.filter.warehouse))).sort(((e,t)=>e.category.localeCompare(t.category)))}},mounted(){this.$state.navbarTitle="Consulta de inventario",ae.Z.get(se+"/stock").then((e=>{console.log(e.data),this.items=e.data.items,this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands,this.warehouses=e.data.warehouses})).catch((e=>{console.log(e)}))},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},resetSubcategory(){this.filter.subcategory=""},calculateStockUnits(e){let t=0;return e.inventory_items.forEach((e=>{const a=parseFloat(e.storing_format_units);isNaN(a)||(t+=a)})),t},resetFilter(e){switch(e){case"all":this.filter.id="",this.filter.category="",this.filter.subcategory="",this.filter.design="",this.filter.brand="",this.filter.warehouse="";break;default:break}}}};const Pn=(0,le.Z)(Zn,[["render",Mn],["__scopeId","data-v-62d6d515"]]);var Nn=Pn;const qn=e=>((0,c.dD)("data-v-eb1be25e"),e=e(),(0,c.Cn)(),e),Rn={class:"container"},Kn={class:"row"},Yn={class:"col-md-8 offset-md-2"},Qn={class:"mb-3"},Gn=qn((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar categoría:",-1))),Jn={class:"row"},Xn={class:"col-md-12"},eo={class:"table-container",style:{"max-height":"700px !important"}},to={class:"table table-bordered"},ao=qn((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Categoría"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),so={class:"text-center"},no={class:"text-center"},oo=["onClick"],ro=["onClick"];function io(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Rn,[(0,c._)("div",Kn,[(0,c._)("div",Yn,[(0,c._)("div",Qn,[Gn,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",Jn,[(0,c._)("div",Xn,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addCategory&&r.addCategory(...e)),class:"btn btn-success"}," Agregar categoría ")])]),(0,c._)("div",eo,[(0,c._)("table",to,[ao,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredCategories,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",so,(0,d.zw)(e.name),1),(0,c._)("td",no,[(0,c._)("button",{onClick:t=>r.editCategory(e),class:"btn btn-primary"}," Editar categoría ",8,oo),(0,c._)("button",{onClick:t=>r.deleteCategory(e),class:"btn btn-danger"}," Eliminar ",8,ro)])])))),128))])])])])])])],64)}var lo={name:"CategoryList",data(){return{categories:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredCategories(){return this.categories.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addCategory(){this.$router.push({name:"AddCategory"})},editCategory(e){this.$router.push({name:"EditCategory",params:{id:e.id}})},deleteCategory(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará la categoría ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(se+"/categories/"+e.id).then((t=>{console.log(t),ne.Am.success("Se ha eliminado la categoría correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.categories=this.categories.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e),ne.Am.error("Ha ocurrido un error al eliminar la categoría, esta posee al menos un artículo asociado",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Categorías",ae.Z.get(se+"/categories").then((e=>{this.categories=e.data})).catch((e=>{console.log(e)}))}};const co=(0,le.Z)(lo,[["render",io],["__scopeId","data-v-eb1be25e"]]);var uo=co;const mo=e=>((0,c.dD)("data-v-4fb92e07"),e=e(),(0,c.Cn)(),e),ho={class:"container"},_o={class:"row"},go={class:"col-md-8 offset-md-2"},po={class:"mb-3"},bo=mo((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar subcategoría:",-1))),fo={class:"row"},vo={class:"col-md-12"},yo={class:"table-container",style:{"max-height":"700px !important"}},wo={class:"table table-bordered"},ko=mo((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Subcategoría"),(0,c._)("th",{class:"text-center"},"Categoría asociada"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Co={class:"text-center"},xo={class:"text-center"},Do={class:"text-center"},Io=["onClick"],Oo=["onClick"];function So(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ho,[(0,c._)("div",_o,[(0,c._)("div",go,[(0,c._)("div",po,[bo,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre o categoría"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",fo,[(0,c._)("div",vo,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addSubcategory&&r.addSubcategory(...e)),class:"btn btn-success"}," Agregar subcategoría ")])]),(0,c._)("div",yo,[(0,c._)("table",wo,[ko,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Co,(0,d.zw)(e.name),1),(0,c._)("td",xo,(0,d.zw)(e.category.name),1),(0,c._)("td",Do,[(0,c._)("button",{onClick:t=>r.editSubcategory(e),class:"btn btn-secondary"}," Editar subcategoría ",8,Io),(0,c._)("button",{onClick:t=>r.deleteSubcategory(e),class:"btn btn-danger"}," Eliminar ",8,Oo)])])))),128))])])])])])])],64)}var Ao={name:"SubcategoryList",data(){return{subcategories:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){return this.subcategories.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.category.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addSubcategory(){this.$router.push({name:"AddSubcategory"})},editSubcategory(e){this.$router.push({name:"EditSubcategory",params:{id:e.id}})},deleteSubcategory(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará la subcategoría ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(se+"/subcategories/"+e.id).then((e=>{this.subcategories=this.subcategories.filter((t=>t.id!==e.data.id)),ne.Am.success("Se ha eliminado la subcategoría correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ne.Am.error("Ha ocurrido un error al eliminar la subcategoría, esto debido a que hay artículos asociados a esta subcategoría",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Subcategorías",ae.Z.get(se+"/subcategories").then((e=>{this.subcategories=e.data})).catch((e=>{console.log(e)}))}};const Vo=(0,le.Z)(Ao,[["render",So],["__scopeId","data-v-4fb92e07"]]);var $o=Vo;const To=e=>((0,c.dD)("data-v-62e16797"),e=e(),(0,c.Cn)(),e),Uo={class:"container"},Lo={class:"row"},jo={class:"col-md-8 offset-md-2"},zo={class:"mb-3"},Eo=To((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar marca:",-1))),Wo={class:"row"},Ho={class:"col-md-12"},Bo={class:"table-container",style:{"max-height":"700px !important"}},Fo={class:"table table-bordered"},Mo=To((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Marca"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Zo={class:"text-center"},Po={class:"text-center"},No=["onClick"];function qo(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Uo,[(0,c._)("div",Lo,[(0,c._)("div",jo,[(0,c._)("div",zo,[Eo,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",Wo,[(0,c._)("div",Ho,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addBrand&&r.addBrand(...e)),class:"btn btn-success"}," Agregar marca ")])]),(0,c._)("div",Bo,[(0,c._)("table",Fo,[Mo,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredBrands,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",Zo,(0,d.zw)(e.name),1),(0,c._)("td",Po,[(0,c.Wm)(i,{to:{name:"EditBrand",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar")])),_:2},1032,["to"]),(0,c._)("button",{onClick:t=>r.deleteBrand(e),class:"btn btn-danger"}," Eliminar ",8,No)])])))),128))])])])])])])],64)}var Ro={name:"BrandList",data(){return{brands:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredBrands(){return this.brands.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addBrand(){this.$router.push({name:"AddBrand"})},deleteBrand(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará la marca ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(se+"/brands/"+e.id).then((t=>{console.log(t),ne.Am.success("Se ha eliminado la marca correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.brands=this.brands.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e),ne.Am.error("No se pudo eliminar, ya que posee artículos relacionados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Marcas",ae.Z.get(se+"/brands").then((e=>{this.brands=e.data})).catch((e=>{console.log(e)}))}};const Ko=(0,le.Z)(Ro,[["render",qo],["__scopeId","data-v-62e16797"]]);var Yo=Ko;const Qo=e=>((0,c.dD)("data-v-63d6a84a"),e=e(),(0,c.Cn)(),e),Go={class:"container"},Jo={class:"row"},Xo={class:"col-md-8 offset-md-2"},er={class:"mb-3"},tr=Qo((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar diseño:",-1))),ar={class:"row"},sr={class:"col-md-12"},nr={class:"table-container",style:{"max-height":"700px !important"}},or={class:"table table-bordered"},rr=Qo((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Diseño"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),ir={class:"text-center"},lr={class:"text-center"},cr=["onClick"],dr=["onClick"];function ur(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Go,[(0,c._)("div",Jo,[(0,c._)("div",Xo,[(0,c._)("div",er,[tr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",ar,[(0,c._)("div",sr,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addDesign&&r.addDesign(...e)),class:"btn btn-success"}," Agregar diseño ")])]),(0,c._)("div",nr,[(0,c._)("table",or,[rr,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredDesigns,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",ir,(0,d.zw)(e.name),1),(0,c._)("td",lr,[(0,c._)("button",{onClick:t=>r.editDesign(e),class:"btn btn-secondary"}," Editar ",8,cr),(0,c._)("button",{onClick:t=>r.deleteDesign(e),class:"btn btn-danger"}," Eliminar ",8,dr)])])))),128))])])])])])])],64)}var mr={name:"DesignList",data(){return{designs:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredDesigns(){return this.designs.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addDesign(){this.$router.push({name:"AddDesign"})},editDesign(e){this.$router.push({name:"EditDesign",params:{id:e.id}})},deleteDesign(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará el diseño ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(`${se}/designs/${e.id}`).then((t=>{console.log(t),this.designs=this.designs.filter((t=>t.id!==e.id)),ne.Am.success("Se ha eliminado el diseño correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ne.Am.error("Ha ocurrido un error al eliminar el diseño, esto debido a que hay artículos asociados a este diseño",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Diseños",ae.Z.get(`${se}/designs`).then((e=>{this.designs=e.data})).catch((e=>{console.log(e)}))}};const hr=(0,le.Z)(mr,[["render",ur],["__scopeId","data-v-63d6a84a"]]);var _r=hr;const gr=e=>((0,c.dD)("data-v-41c895bf"),e=e(),(0,c.Cn)(),e),pr={class:"container"},br={class:"row"},fr={class:"col-md-8 offset-md-2"},vr={class:"mb-3"},yr=gr((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar bodega:",-1))),wr={class:"row"},kr={class:"col-md-12"},Cr={class:"table-container",style:{"max-height":"700px !important"}},xr={class:"table table-bordered"},Dr=gr((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Bodega"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Ir={class:"text-center"},Or={class:"text-center"},Sr=["onClick"];function Ar(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",pr,[(0,c._)("div",br,[(0,c._)("div",fr,[(0,c._)("div",vr,[yr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",wr,[(0,c._)("div",kr,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addWarehouse&&r.addWarehouse(...e)),class:"btn btn-success"}," Agregar bodega ")])]),(0,c._)("div",Cr,[(0,c._)("table",xr,[Dr,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredWarehouses,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",Ir,(0,d.zw)(e.name),1),(0,c._)("td",Or,[(0,c.Wm)(i,{to:{name:"EditWarehouse",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar")])),_:2},1032,["to"]),(0,c._)("button",{onClick:t=>r.deleteWarehouse(e),class:"btn btn-danger"}," Eliminar ",8,Sr)])])))),128))])])])])])])],64)}var Vr={name:"WarehouseList",data(){return{warehouses:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredWarehouses(){return this.warehouses.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addWarehouse(){this.$router.push({name:"AddWarehouse"})},deleteWarehouse(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará la bodega ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(`${se}/warehouses/${e.id}`).then((t=>{console.log(t),this.warehouses=this.warehouses.filter((t=>t.id!==e.id)),ne.Am.success("Se ha eliminado la bodega correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ne.Am.error("Ha ocurrido un error al eliminar la bodega",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Bodegas",ae.Z.get(`${se}/warehouses`).then((e=>{this.warehouses=e.data})).catch((e=>{console.log(e)}))}};const $r=(0,le.Z)(Vr,[["render",Ar],["__scopeId","data-v-41c895bf"]]);var Tr=$r;const Ur=e=>((0,c.dD)("data-v-9a93a7d2"),e=e(),(0,c.Cn)(),e),Lr={class:"container"},jr={class:"row"},zr={class:"col-md-12 mb-3 me-1 d-flex align-items-center"},Er={class:"col-md-10 me-2"},Wr=Ur((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar artículo:",-1))),Hr={class:"col-md-2 ms-2 align-self-center"},Br=Ur((()=>(0,c._)("br",null,null,-1))),Fr={class:"table-container",style:{"max-height":"700px !important"}},Mr={class:"table table-bordered"},Zr=Ur((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{scope:"col",class:"text-center"},"Código"),(0,c._)("th",{scope:"col",class:"text-center"},"Nombre"),(0,c._)("th",{scope:"col",class:"text-center"},"Categoría"),(0,c._)("th",{scope:"col",class:"text-center"},"Subcategoría"),(0,c._)("th",{scope:"col",class:"text-center"},"Inventario mínimo"),(0,c._)("th",{scope:"col",class:"text-center"},"Unidades"),(0,c._)("th",{scope:"col",class:"text-center"},"Estado"),(0,c._)("th",{scope:"col",class:"text-center"},"Marca"),(0,c._)("th",{scope:"col",class:"text-center"},"Diseño"),(0,c._)("th",{scope:"col",class:"text-center"},"Acciones")])],-1))),Pr={class:"text-center"},Nr={class:"text-center"},qr={class:"text-center"},Rr={class:"text-center"},Kr={class:"text-center"},Yr={class:"text-center"},Qr={class:"text-center"},Gr={class:"text-center"},Jr={class:"text-center"},Xr={class:"text-center"},ei=["onClick"],ti=["onClick"],ai=["onClick"];function si(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Lr,[(0,c._)("div",jr,[(0,c._)("div",zr,[(0,c._)("div",Er,[Wr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por cualquier característica"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",Hr,[Br,(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addArticle&&r.addArticle(...e)),class:"btn btn-success"}," Agregar artículo ")])])]),(0,c._)("div",Fr,[(0,c._)("table",Mr,[Zr,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredArticles,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Pr,(0,d.zw)(e.general_code),1),(0,c._)("td",Nr,(0,d.zw)(e.name),1),(0,c._)("td",qr,(0,d.zw)(e.category_name),1),(0,c._)("td",Rr,(0,d.zw)(e.subcategory_name),1),(0,c._)("td",Kr,(0,d.zw)(e.minimal_stock),1),(0,c._)("td",Yr,(0,d.zw)(e.storing_format_units_name),1),(0,c._)("td",Qr,(0,d.zw)("active"===e.status?"Activo":"Inactivo"),1),(0,c._)("td",Gr,(0,d.zw)(null!==e.brand_id?e.brand_name:"No posee"),1),(0,c._)("td",Jr,(0,d.zw)(null!==e.design_id?e.design_name:"No posee"),1),(0,c._)("td",Xr,[(0,c.Wm)(i,{to:{name:"ArticleDetails",params:{id:e.id}},class:"btn btn-primary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Detalles ")])),_:2},1032,["to"]),(0,c.Wm)(i,{to:{name:"EditArticle",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar ")])),_:2},1032,["to"]),e.transfers<=0&&e.insertions<=0&&e.removals<=0?((0,c.wg)(),(0,c.iD)("button",{key:0,onClick:t=>r.deleteArticle(e),class:"btn btn-danger"}," Eliminar ",8,ei)):"active"===e.status?((0,c.wg)(),(0,c.iD)("button",{key:1,onClick:t=>r.toggleItemStatus(e),class:"btn btn-warning"}," Desactivar ",8,ti)):"inactive"===e.status?((0,c.wg)(),(0,c.iD)("button",{key:2,onClick:t=>r.toggleItemStatus(e),class:"btn btn-warning"}," Activar ",8,ai)):(0,c.kq)("",!0)])])))),128))])])])])],64)}var ni={name:"ArticleList",data(){return{items:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredArticles(){return this.items.filter((e=>{const t=this.searchQuery.toLowerCase();return e.name.toLowerCase().includes(t)||e.general_code.toLowerCase().includes(t)||e.conversion_factor.toLowerCase().includes(t)||e.minimal_stock.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||e.subcategory_name.toLowerCase().includes(t)||e.category_name.toLowerCase().includes(t)||null!=e.brand_name&&e.brand_name.toLowerCase().includes(t)||null!=e.design_name&&e.design_name.toLowerCase().includes(t)}))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addArticle(){this.$router.push({name:"AddArticle"})},deleteArticle(e){qe().fire({title:"¿Estás seguro?",text:`Se eliminará el artículo ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.delete(se+"/items/?id="+e.id+"&user="+this.$store.state.user.id).then((t=>{console.log(t),ne.Am.success("Se ha eliminado el artículo correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.items=this.items.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e)}))}))},toggleItemStatus(e){console.log(e),qe().fire({title:"¿Estás seguro?",text:`Se ${"active"===e.status?"desactivará":"activará"} el artículo ${e.name}. ${"active"===e.status?"No se podrá realizar ninguna operación con este artículo.":""}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, "+("active"===e.status?"desactivarlo":"activarlo"),cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.put(se+"/items/"+e.id+"/toggle_status",{id:e.id,user:this.$store.state.user.id}).then((t=>{console.log(t),ne.Am.success(`Se ha ${"active"===e.status?"desactivado":"activado"} el artículo correctamente`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),e.status="active"===e.status?"inactive":"active"})).catch((e=>{console.log(e)}))}))}},mounted(){this.$state.navbarTitle="Lista de Artículos",ae.Z.get(se+"/items").then((e=>{console.log(e),this.items=e.data})).catch((e=>{console.log(e)}))}};const oi=(0,le.Z)(ni,[["render",si],["__scopeId","data-v-9a93a7d2"]]);var ri=oi;const ii=e=>((0,c.dD)("data-v-4721b173"),e=e(),(0,c.Cn)(),e),li={class:"container"},ci={class:"row"},di={class:"col-md-8 offset-md-2"},ui=ii((()=>(0,c._)("h3",null,"Usuarios en el sistema",-1))),mi={class:"mb-3 mt-3"},hi=ii((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar usuario:",-1))),_i={class:"col-md-12"},gi={class:"table-container",style:{"max-height":"700px !important"}},pi={class:"table table-bordered"},bi=ii((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Nombre"),(0,c._)("th",null,"Cédula"),(0,c._)("th",null,"Estado"),(0,c._)("th",null,"Rol"),(0,c._)("th",null,"Email"),(0,c._)("th",null,"Acciones")])],-1))),fi=["onClick"];function vi(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",li,[(0,c._)("div",ci,[(0,c._)("div",di,[ui,(0,c._)("div",mi,[hi,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e),placeholder:"Buscar por nombre o cédula"},null,512),[[s.nr,o.searchQuery]])]),(0,c._)("div",_i,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addUser&&r.addUser(...e)),class:"btn btn-success"}," Agregar usuario ")]),(0,c._)("div",gi,[(0,c._)("table",pi,[bi,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredUsers,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",null,(0,d.zw)(e.id_card),1),(0,c._)("td",null,(0,d.zw)("active"===e.status?"Activo":"Inactivo"),1),(0,c._)("td",null,(0,d.zw)("admin"===e.role?"Administrador":"Usuario regular"),1),(0,c._)("td",null,(0,d.zw)(e.email),1),(0,c._)("td",null,[(0,c._)("button",{onClick:t=>r.deactivateUser(e),class:"btn btn-danger"},(0,d.zw)("active"===e.status?"Desactivar":"Activar"),9,fi)])])))),128))])])])])])])],64)}var yi={name:"UserList",data(){return{users:[],searchQuery:"",current_user_id:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredUsers(){return this.users.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id_card.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addUser(){this.$router.push({name:"AddUser"})},deactivateUser(e){"active"===e.status?qe().fire({title:"¿Estás seguro?",text:"El usuario será desactivado y no podrá acceder al sistema",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Desactivar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.put(se+"/users/"+e.id,{status:"inactive",creator_user_id:this.current_user_id}).then((t=>{ne.Am.success("Usuario desactivado correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(t.data),this.users=this.users.map((t=>(t.id===e.id&&(t.status="inactive"),t)))})).catch((e=>{console.log(e)}))})):qe().fire({title:"¿Estás seguro?",text:"El usuario será activado y podrá acceder al sistema",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Activar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ae.Z.put(se+"/users/"+e.id,{status:"active",creator_user_id:this.current_user_id}).then((t=>{ne.Am.success("Usuario activado correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(t.data),this.users=this.users.map((t=>(t.id===e.id&&(t.status="active"),t)))})).catch((e=>{console.log(e)}))}))}},mounted(){this.$state.navbarTitle="Lista de usuarios",ae.Z.get(se+"/users").then((e=>{this.users=e.data})).catch((e=>{console.log(e)})),this.current_user_id=this.$store.state.user.id}};const wi=(0,le.Z)(yi,[["render",vi],["__scopeId","data-v-4721b173"]]);var ki=wi;const Ci=e=>((0,c.dD)("data-v-2cc68e26"),e=e(),(0,c.Cn)(),e),xi={class:"container"},Di={class:"row"},Ii={class:"row border rounded-3 p-3 mb-lg-5"},Oi=Ci((()=>(0,c._)("h4",{class:"filter-title"},"Filtros",-1))),Si={class:"filters-container",style:{display:"inline-block","align-items":"center","justify-content":"center"}},Ai={class:"row",style:{"justify-content":"center","align-items":"center"}},Vi={class:"col-md-2",style:{margin:"10px"}},$i=Ci((()=>(0,c._)("label",{for:"code"},"Código",-1))),Ti={class:"col-md-2",style:{margin:"10px"}},Ui=Ci((()=>(0,c._)("label",{for:"articleCode"},"Código del artículo",-1))),Li={class:"col-md-2",style:{margin:"10px"}},ji=Ci((()=>(0,c._)("label",{for:"articleCode"},"Nombre del artículo",-1))),zi={class:"col-md-2",style:{margin:"10px"}},Ei=Ci((()=>(0,c._)("label",{for:"fromDate"},"Fecha (desde)",-1))),Wi={class:"col-md-2",style:{margin:"10px"}},Hi=Ci((()=>(0,c._)("label",{for:"toDate"},"Fecha (hasta)",-1))),Bi={class:"row",style:{"justify-content":"center","align-items":"center"}},Fi={class:"mt-3 mb-4"},Mi=Ci((()=>(0,c._)("h3",null,"Salidas",-1))),Zi={class:"table-container"},Pi={class:"table table-striped table-hover"},Ni=Ci((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos removidos"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Fecha"),(0,c._)("th",null,"Acciones")])],-1))),qi=["href"],Ri={class:"mt-3 mb-4"},Ki=Ci((()=>(0,c._)("h3",null,"Entradas",-1))),Yi={class:"table-container"},Qi={class:"table table-hover table-striped"},Gi=Ci((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos ingresados"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Fecha"),(0,c._)("th",null,"Acciones")])],-1))),Ji=["href"],Xi={class:"mt-3 mb-4"},el=Ci((()=>(0,c._)("h3",null,"Transferencias",-1))),tl={class:"table-container"},al={class:"table"},sl=Ci((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos Tranferidos"),(0,c._)("th",null,"Bodega emisora"),(0,c._)("th",null,"Bodega receptora"),(0,c._)("th",null,"Fecha de Creación"),(0,c._)("th",null,"Acciones")])],-1))),nl=["href"];function ol(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",xi,[(0,c._)("div",Di,[(0,c._)("div",Ii,[Oi,(0,c._)("div",Si,[(0,c._)("div",Ai,[(0,c._)("div",Vi,[$i,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"code","onUpdate:modelValue":t[2]||(t[2]=e=>o.searchIdentifier=e)},null,512),[[s.nr,o.searchIdentifier]])]),(0,c._)("div",Ti,[Ui,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"articleCode","onUpdate:modelValue":t[3]||(t[3]=e=>o.searchArticleCode=e)},null,512),[[s.nr,o.searchArticleCode]])]),(0,c._)("div",Li,[ji,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"articleCode","onUpdate:modelValue":t[4]||(t[4]=e=>o.searchArticleName=e)},null,512),[[s.nr,o.searchArticleName]])]),(0,c._)("div",zi,[Ei,(0,c.wy)((0,c._)("input",{type:"date",class:"form-control",id:"fromDate","onUpdate:modelValue":t[5]||(t[5]=e=>o.searchFromDate=e)},null,512),[[s.nr,o.searchFromDate]])]),(0,c._)("div",Wi,[Hi,(0,c.wy)((0,c._)("input",{type:"date",class:"form-control",id:"toDate","onUpdate:modelValue":t[6]||(t[6]=e=>o.searchToDate=e)},null,512),[[s.nr,o.searchToDate]])])])]),(0,c._)("div",Bi,[(0,c._)("button",{class:"btn btn-secondary",style:{width:"200px",margin:"10px"},onClick:t[7]||(t[7]=e=>r.resetFilter("all"))}," Limpiar filtros ")])]),(0,c._)("div",Fi,[Mi,(0,c._)("div",Zi,[(0,c._)("table",Pi,[Ni,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("S"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,qi)])])))),128))])])])]),(0,c._)("div",Ri,[Ki,(0,c._)("div",Yi,[(0,c._)("table",Qi,[Gi,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("E"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,Ji)])])))),128))])])])]),(0,c._)("div",Xi,[el,(0,c._)("div",tl,[(0,c._)("table",al,[sl,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("T"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.from_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,nl)])])))),128))])])])])])])],64)}var rl={name:"TransactionList",data(){return{transactions:[],searchIdentifier:"",searchArticleCode:"",searchArticleName:"",searchFromDate:"",searchToDate:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredTransactions(){return e=>this.transactions.filter((t=>{const a=t.identifier.includes(this.searchIdentifier),s=t.movements.some((e=>e.item.general_code.includes(this.searchArticleCode)||e.item.name.includes(this.searchArticleName))),n=(!this.searchFromDate||t.created_at>=this.searchFromDate)&&(!this.searchToDate||t.created_at<=this.searchToDate);return a&&s&&n&&t.type===e}))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},fetchTransactions(){ae.Z.get(`${se}/transactions`).then((e=>{this.transactions=e.data.transactions.map((e=>({...e,pdf_url:`${se}/transactions/${e.id}`})))})).catch((e=>{console.log(e)}))},formatDate(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})},resetFilter(e){switch(e){case"all":this.searchIdentifier="",this.searchArticleCode="",this.searchArticleName="",this.searchFromDate="",this.searchToDate="";break;default:break}}},mounted(){this.fetchTransactions(),this.$state.navbarTitle="Registro de movimientos"}};const il=(0,le.Z)(rl,[["render",ol],["__scopeId","data-v-2cc68e26"]]);var ll=il;const cl=e=>((0,c.dD)("data-v-00550ac8"),e=e(),(0,c.Cn)(),e),dl={class:"add-item container"},ul={class:"mb-lg-5"},ml=cl((()=>(0,c._)("div",{class:"text-center mb-lg-2"},[(0,c._)("h2",null,"Detalles del artículo")],-1))),hl={class:"table-responsive-lg"},_l={class:"table table-bordered table-secondary"},gl=cl((()=>(0,c._)("td",{class:"table-label"},"Código:",-1))),pl={class:"table-input",colspan:"5"},bl={class:"input-group"},fl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-123"})],-1))),vl=["readonly"],yl=cl((()=>(0,c._)("td",{class:"table-label"},"Nombre:",-1))),wl={class:"table-input",colspan:"5"},kl={class:"input-group"},Cl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-person-badge-fill"})],-1))),xl=["readonly"],Dl=cl((()=>(0,c._)("td",{class:"table-label"},"Stock Mínimo:",-1))),Il={class:"table-input",colspan:"2"},Ol={class:"input-group"},Sl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-dash-square-fill"})],-1))),Al=["readonly"],Vl=cl((()=>(0,c._)("td",{class:"table-label"},"Factor de Conversión:",-1))),$l={class:"table-input",colspan:"2"},Tl={class:"input-group"},Ul=(0,c.uE)('<div class="item" style="margin-right:8px;margin-top:6px;height:15px;" data-v-00550ac8><i class="bi bi-info-circle" style="font-size:15px;" data-v-00550ac8></i><div class="text-area" data-v-00550ac8><span class="text" data-v-00550ac8>Factor de conversión corresponde a cuántas unidades de venta equivalen a 1 unidad de inventario</span></div></div><span class="input-group-text" data-v-00550ac8><i class="bi bi-input-cursor" data-v-00550ac8></i></span>',2),Ll=["readonly"],jl=cl((()=>(0,c._)("td",{class:"table-label"},"Unidades de Inventario:",-1))),zl={class:"table-input",colspan:"2"},El={class:"input-group"},Wl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-postcard"})],-1))),Hl=["readonly"],Bl=cl((()=>(0,c._)("td",{class:"table-label"},"Unidades de Venta:",-1))),Fl={class:"table-input",colspan:"2"},Ml={class:"input-group"},Zl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-postcard"})],-1))),Pl=["readonly"],Nl=cl((()=>(0,c._)("td",{class:"table-label"},"Categoría:",-1))),ql={class:"table-input",colspan:"5"},Rl={class:"input-group"},Kl=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tag-fill"})],-1))),Yl=["disabled"],Ql=cl((()=>(0,c._)("option",{disabled:"",value:""},"Seleccionar categoría",-1))),Gl=["value"],Jl=cl((()=>(0,c._)("td",{class:"table-label"},"Subcategoría:",-1))),Xl={class:"table-input",colspan:"5"},ec={class:"input-group"},tc=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tags"})],-1))),ac=["disabled"],sc=cl((()=>(0,c._)("option",{disabled:"",selected:"",value:""}," Seleccionar subcategoría ",-1))),nc=["value"],oc=cl((()=>(0,c._)("td",{class:"table-label"},"Diseño:",-1))),rc={class:"table-input",colspan:"5"},ic={class:"input-group"},lc=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-x-diamond-fill"})],-1))),cc=["disabled"],dc=cl((()=>(0,c._)("option",{value:""},"No posee",-1))),uc=["value"],mc=cl((()=>(0,c._)("td",{class:"table-label"},"Marca:",-1))),hc={class:"table-input",colspan:"5"},_c={class:"input-group"},gc=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-medium"})],-1))),pc=["disabled"],bc=cl((()=>(0,c._)("option",{value:""},"No posee",-1))),fc=["value"],vc=cl((()=>(0,c._)("td",{class:"table-label"},"Imagen:",-1))),yc={class:"table-input",colspan:"5"},wc={key:0},kc=["src"],Cc={key:1},xc=cl((()=>(0,c._)("span",null,"No hay imagen disponible",-1))),Dc=[xc],Ic={key:2},Oc={class:"input-group"},Sc=cl((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-card-image"})],-1))),Ac={key:0,class:"mt-lg-4 mb-lg-5"},Vc={class:"row"},$c=cl((()=>(0,c._)("div",{class:"text-center"},[(0,c._)("h4",null,"Inventario en bodegas")],-1))),Tc={class:"mt-lg-1 table-responsive-lg"},Uc=cl((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Bodega"),(0,c._)("th",{class:"text-center"},"Stock en bodega en unidades de almacenamiento"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Stock en bodega en unidades de salida"),(0,c._)("th",{class:"text-center"},"Unidades")])],-1))),Lc={class:"text-center"},jc={class:"text-center"},zc={class:"text-center"},Ec={class:"text-center"},Wc={class:"text-center"},Hc=cl((()=>(0,c._)("td",{class:"text-center fw-bold"},"Total",-1))),Bc={class:"text-center fw-bold"},Fc={class:"text-center"},Mc={class:"text-center fw-bold"},Zc={class:"text-center"},Pc={class:"text-center mt-lg-4"},Nc={key:0,class:"btn btn-primary btn-save",type:"submit"};function qc(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),type:"checkbox",onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",dl,[(0,c._)("form",{class:"form-estilo",onSubmit:t[15]||(t[15]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",ul,[ml,(0,c._)("div",hl,[(0,c._)("table",_l,[(0,c._)("tbody",null,[(0,c._)("tr",null,[gl,(0,c._)("td",pl,[(0,c._)("div",bl,[fl,(0,c.wy)((0,c._)("input",{id:"general_code","onUpdate:modelValue":t[2]||(t[2]=e=>o.general_code=e),readonly:o.isReadOnly,class:"form-control",type:"text"},null,8,vl),[[s.nr,o.general_code]])])])]),(0,c._)("tr",null,[yl,(0,c._)("td",wl,[(0,c._)("div",kl,[Cl,(0,c.wy)((0,c._)("input",{id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.name=e),readonly:o.isReadOnly,class:"form-control",type:"text"},null,8,xl),[[s.nr,o.name]])])])]),(0,c._)("tr",null,[Dl,(0,c._)("td",Il,[(0,c._)("div",Ol,[Sl,(0,c.wy)((0,c._)("input",{id:"minimal_stock","onUpdate:modelValue":t[4]||(t[4]=e=>o.minimal_stock=e),readonly:o.isReadOnly,class:"form-control",type:"number"},null,8,Al),[[s.nr,o.minimal_stock]])])]),Vl,(0,c._)("td",$l,[(0,c._)("div",Tl,[Ul,(0,c.wy)((0,c._)("input",{id:"conversion_factor","onUpdate:modelValue":t[5]||(t[5]=e=>o.conversion_factor=e),readonly:o.isReadOnly,class:"form-control",type:"number"},null,8,Ll),[[s.nr,o.conversion_factor]])])])]),(0,c._)("tr",null,[jl,(0,c._)("td",zl,[(0,c._)("div",El,[Wl,(0,c.wy)((0,c._)("input",{id:"storing_format_units_name","onUpdate:modelValue":t[6]||(t[6]=e=>o.storing_format_units_name=e),readonly:o.isReadOnly,class:"form-control",type:"text"},null,8,Hl),[[s.nr,o.storing_format_units_name]])])]),Bl,(0,c._)("td",Fl,[(0,c._)("div",Ml,[Zl,(0,c.wy)((0,c._)("input",{id:"transferring_format_units_name","onUpdate:modelValue":t[7]||(t[7]=e=>o.transferring_format_units_name=e),readonly:o.isReadOnly,class:"form-control",type:"text"},null,8,Pl),[[s.nr,o.transferring_format_units_name]])])])]),(0,c._)("tr",null,[Nl,(0,c._)("td",ql,[(0,c._)("div",Rl,[Kl,(0,c.wy)((0,c._)("select",{id:"category","onUpdate:modelValue":t[8]||(t[8]=e=>o.filter.category=e),disabled:o.isReadOnly,class:"form-select",onChange:t[9]||(t[9]=(...e)=>r.onCategoryChange&&r.onCategoryChange(...e))},[Ql,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.name,value:e.name},(0,d.zw)(e.name),9,Gl)))),128))],40,Yl),[[s.bM,o.filter.category]])])])]),(0,c._)("tr",null,[Jl,(0,c._)("td",Xl,[(0,c._)("div",ec,[tc,(0,c.wy)((0,c._)("select",{id:"subcategory","onUpdate:modelValue":t[10]||(t[10]=e=>o.subcategory_id=e),disabled:o.isReadOnly,class:"form-select"},[sc,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.name,value:e.id},(0,d.zw)(e.name),9,nc)))),128))],8,ac),[[s.bM,o.subcategory_id]])])])]),(0,c._)("tr",null,[oc,(0,c._)("td",rc,[(0,c._)("div",ic,[lc,(0,c.wy)((0,c._)("select",{id:"design","onUpdate:modelValue":t[11]||(t[11]=e=>o.design_id=e),disabled:o.isReadOnly,class:"form-select"},[dc,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.designs,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e.id},(0,d.zw)(e.name),9,uc)))),128))],8,cc),[[s.bM,o.design_id]])])])]),(0,c._)("tr",null,[mc,(0,c._)("td",hc,[(0,c._)("div",_c,[gc,(0,c.wy)((0,c._)("select",{id:"brand","onUpdate:modelValue":t[12]||(t[12]=e=>o.brand_id=e),disabled:o.isReadOnly,class:"form-select"},[bc,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.brands,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e.id},(0,d.zw)(e.name),9,fc)))),128))],8,pc),[[s.bM,o.brand_id]])])])]),(0,c._)("tr",null,[vc,(0,c._)("td",yc,[o.image_url&&o.isReadOnly?((0,c.wg)(),(0,c.iD)("div",wc,[(0,c._)("img",{src:o.image_url,alt:"Imagen del artículo",style:{"max-width":"100px"}},null,8,kc)])):!o.image_url&&o.isReadOnly?((0,c.wg)(),(0,c.iD)("div",Cc,Dc)):((0,c.wg)(),(0,c.iD)("div",Ic,[(0,c._)("div",Oc,[Sc,(0,c._)("input",{id:"image",accept:"image/*",class:"form-control",type:"file",onChange:t[13]||(t[13]=(...e)=>r.handleImageChange&&r.handleImageChange(...e))},null,32)])]))])])])])])]),o.isReadOnly?((0,c.wg)(),(0,c.iD)("div",Ac,[(0,c._)("div",Vc,[$c,(0,c._)("div",Tc,[(0,c._)("table",{class:(0,d.C_)([{"table-sm":o.isSmallScreen},"table table-hover table-secondary table-striped"])},[Uc,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.inventory_items,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Lc,(0,d.zw)(e.warehouse),1),(0,c._)("td",jc,(0,d.zw)(e.storing_format_units),1),(0,c._)("td",zc,(0,d.zw)(o.storing_format_units_name),1),(0,c._)("td",Ec,(0,d.zw)(e.transferring_format_units),1),(0,c._)("td",Wc,(0,d.zw)(o.transferring_format_units_name),1)])))),128)),(0,c._)("tr",null,[Hc,(0,c._)("td",Bc,(0,d.zw)(r.calculateStockUnits()),1),(0,c._)("td",Fc,(0,d.zw)(o.storing_format_units_name),1),(0,c._)("td",Mc,(0,d.zw)(r.calculateTransferringUnits()),1),(0,c._)("td",Zc,(0,d.zw)(o.transferring_format_units_name),1)])])],2)])])])):(0,c.kq)("",!0),(0,c._)("div",Pc,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",Nc," Guardar ")),(0,c.Wm)(i,{class:"btn btn-danger btn-save",to:"#",type:"button",onClick:t[14]||(t[14]=e=>r.goToPreviousPage())},{default:(0,c.w5)((()=>[(0,c.Uk)(" Volver ")])),_:1})])],32)])],64)}var Rc={data(){return{filter:{category:""},id:"",general_code:"",name:"",minimal_stock:"",storing_format_units_name:"",transferring_format_units_name:"",conversion_factor:"",subcategory_id:"",design_id:"",brand_id:"",categories:[],designs:[],brands:[],inventory_items:[],isReadOnly:!1,mode:"",isSmallScreen:!1,image_url:null}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){const e=this.categories.find((e=>e.name===this.filter.category));return e?e.subcategories:[]}},created(){const e=this.$route.params.id;e?this.fetchItemData(e):this.fetchNewItemData(),window.location.href.includes("details")&&(this.isReadOnly=!0,this.$state.navbarTitle="Detalles")},mounted(){this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},handleImageChange(e){this.image=e.target.files[0]},onCategoryChange(){this.filter.subcategory=""},calculateStockUnits(){let e=0;return this.inventory_items.forEach((t=>{const a=parseFloat(t.storing_format_units);isNaN(a)||(e+=a)})),e.toFixed(1)},calculateTransferringUnits(){let e=0;return this.inventory_items.forEach((t=>{const a=parseFloat(t.transferring_format_units);isNaN(a)||(e+=a)})),e.toFixed(1)},fetchNewItemData(){this.$state.navbarTitle="Agregar Nuevo Artículo",this.mode="new",ae.Z.get(`${se}/new_item`).then((e=>{this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands})).catch((e=>{console.log(e)}))},fetchItemData(e){this.mode="edit",this.$state.navbarTitle="Editar Artículo",ae.Z.get(`${se}/new_item`).then((e=>{this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands})).catch((e=>{console.log(e)})),ae.Z.get(`${se}/items/${e}`).then((e=>{const t=e.data;this.id=t.item.id,this.general_code=t.item.general_code,this.name=t.item.name,this.minimal_stock=t.item.minimal_stock,this.storing_format_units_name=t.item.storing_format_units_name,this.transferring_format_units_name=t.item.transferring_format_units_name,this.conversion_factor=t.item.conversion_factor,this.filter.category=t.item.category_name,this.subcategory_id=t.item.subcategory_id,this.design_id=t.item.design_id||"",this.brand_id=t.item.brand_id||"",this.inventory_items=t.inventory_items,this.image_url=e.data.image_url})).catch((e=>{console.log(e)}))},onSubmit(){let e={id:void 0!==this.$route.params.id?null:this.id,name:this.name,minimal_stock:this.minimal_stock,storing_format_units_name:this.storing_format_units_name,transferring_format_units_name:this.transferring_format_units_name,conversion_factor:this.conversion_factor,subcategory_id:this.subcategory_id,design_id:this.design_id,brand_id:this.brand_id,general_code:this.general_code};e.user=this.$store.state.user.id,"edit"===this.mode?this.updateItem(e):this.createItem(e)},updateItem(e){let t=new FormData;for(let a in e)t.append(a,e[a]);ae.Z.put(`${se}/items/${this.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then((async()=>{ne.Am.success("Artículo actualizado exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/items")})).catch((async e=>{console.log(e),await new Promise((e=>setTimeout(e,2e3))),ne.Am.error("Error al actualizar artículo",{closeOnClick:!1})}))},goToPreviousPage(){this.$router.go(-1)},createItem(e){console.log(e);let t=new FormData;for(let a in e)t.append(a,e[a]);ae.Z.post(`${se}/items`,t,{headers:{"Content-Type":"multipart/form-data"}}).then((async()=>{ne.Am.success("Artículo creado exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/items")})).catch((async e=>{console.log(e),await new Promise((e=>setTimeout(e,2e3))),ne.Am.error("Error al crear artículo",{closeOnClick:!1})}))},checkScreenSize(){this.isSmallScreen=window.innerWidth<1e3}}};const Kc=(0,le.Z)(Rc,[["render",qc],["__scopeId","data-v-00550ac8"]]);var Yc=Kc;const Qc=e=>((0,c.dD)("data-v-710d4ce3"),e=e(),(0,c.Cn)(),e),Gc={class:"container"},Jc={class:"table-responsive"},Xc={class:"table table-bordered table-secondary"},ed=Qc((()=>(0,c._)("td",{class:"table-label"},"Nombre de la categoría:",-1))),td={class:"table-input",colspan:"5"},ad={class:"input-group"},sd=Qc((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tag-fill"})],-1))),nd=["disabled"],od={class:"d-flex justify-content-end"},rd={key:0,class:"btn btn-primary",type:"submit"},id={key:1,class:"btn btn-danger",type:"submit"};function ld(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Gc,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",Jc,[(0,c._)("table",Xc,[(0,c._)("tbody",null,[(0,c._)("tr",null,[ed,(0,c._)("td",td,[(0,c._)("div",ad,[sd,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"category",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),disabled:o.isReadOnly},null,8,nd),[[s.nr,o.name]])])])])])])]),(0,c._)("div",od,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",rd," Guardar cambios ")),o.isReadOnly?((0,c.wg)(),(0,c.iD)("button",id," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/categories",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var cd={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={category:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createCategory(e):this.updateCategory(e)},createCategory(e){ae.Z.post(`${se}/categories`,e).then((async e=>{console.log(e),ne.Am.success("Categoría creada exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/categories")})).catch((async e=>{console.log(e),ne.Am.error("Error al crear la categoría",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3)))}))},updateCategory(e){const t=this.$route.params.id;ae.Z.put(`${se}/categories/${t}`,e).then((async e=>{console.log(e),ne.Am.success("Categoría actualizada exitosamente",{timeout:5e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/categories")})).catch((async e=>{console.log(e),ne.Am.error("Error al actualizar la categoría",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3)))}))},fetchCategoryData(e){ae.Z.get(`${se}/categories/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nueva Categoría"}};const dd=(0,le.Z)(cd,[["render",ld],["__scopeId","data-v-710d4ce3"]]);var ud=dd;const md=e=>((0,c.dD)("data-v-72d10d8c"),e=e(),(0,c.Cn)(),e),hd={class:"container"},_d={class:"table-responsive"},gd={class:"table table-bordered table-secondary"},pd=md((()=>(0,c._)("td",{class:"table-label"},"Marca:",-1))),bd={class:"table-input",colspan:"5"},fd={class:"input-group"},vd=md((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-medium"})],-1))),yd=["disabled"],wd={class:"d-flex justify-content-end"},kd={key:0,class:"btn btn-primary",type:"submit"},Cd={key:1,class:"btn btn-primary",type:"submit"};function xd(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",hd,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",_d,[(0,c._)("table",gd,[(0,c._)("tbody",null,[(0,c._)("tr",null,[pd,(0,c._)("td",bd,[(0,c._)("div",fd,[vd,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"brand",name:"brand","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),disabled:o.isReadOnly},null,8,yd),[[s.nr,o.name]])])])])])])]),(0,c._)("div",wd,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",kd," Guardar ")),o.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Cd," Guardar cambios ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/brands",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Dd={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchBrandData(e)):(this.isReadOnly=!1,this.type="new")},mounted(){this.$state.navbarTitle="Agregar Nueva Marca"},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={brand:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createBrand(e):this.updateBrand(e)},async createBrand(e){ae.Z.post(`${se}/brands`,e).then((async e=>{console.log(e),ne.Am.success("Marca creada exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/brands")})).catch((e=>{ne.Am.error("Error al crear la marca",{closeOnClick:!1}),console.log(e)}))},updateBrand(e){const t=this.$route.params.id;ae.Z.put(`${se}/brands/${t}`,e).then((async e=>{console.log(e),ne.Am.success("Marca actualizada exitosamente",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/brands")})).catch((async e=>{ne.Am.error("Error al actualizar la marca",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3))),console.log(e)}))},fetchBrandData(e){ae.Z.get(`${se}/brands/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}}};const Id=(0,le.Z)(Dd,[["render",xd],["__scopeId","data-v-72d10d8c"]]);var Od=Id;const Sd=e=>((0,c.dD)("data-v-4381caed"),e=e(),(0,c.Cn)(),e),Ad={class:"container"},Vd={class:"table-responsive"},$d={class:"table table-bordered table-secondary"},Td=Sd((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre de la subcategoría:",-1))),Ud={class:"table-input"},Ld=["disabled"],jd=Sd((()=>(0,c._)("td",{class:"table-label"}," Seleccione la categoría a la que se asociará esta subcategoría: ",-1))),zd={class:"table-input"},Ed=["disabled"],Wd=Sd((()=>(0,c._)("option",{value:"",disabled:"",selected:""}," Seleccione una categoría ",-1))),Hd=["value"],Bd={class:"d-flex justify-content-end"},Fd={key:0,class:"btn btn-primary",type:"submit"},Md={key:1,class:"btn btn-danger",type:"submit"};function Zd(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Ad,[(0,c._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>r.onCreateSubcategory&&r.onCreateSubcategory(...e)),["prevent"]))},[(0,c._)("div",Vd,[(0,c._)("table",$d,[(0,c._)("tbody",null,[(0,c._)("tr",null,[Td,(0,c._)("td",Ud,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"subcategory","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),disabled:o.isReadOnly},null,8,Ld),[[s.nr,o.name]])])]),(0,c._)("tr",null,[jd,(0,c._)("td",zd,[(0,c.wy)((0,c._)("select",{class:"form-control",id:"category","onUpdate:modelValue":t[3]||(t[3]=e=>o.category=e),disabled:o.isReadOnly},[Wd,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e.id},(0,d.zw)(e.name),9,Hd)))),128))],8,Ed),[[s.bM,o.category]])])])])])]),(0,c._)("div",Bd,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",Fd," Guardar cambios ")),o.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Md," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/subcategories",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Pd={data(){return{name:"",category:"",categories:[],isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},mounted(){this.$state.navbarTitle="Agregar Nueva Subcategoría",ae.Z.get(se+"/categories").then((e=>{this.categories=e.data})).catch((e=>{console.log(e)}))},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onCreateSubcategory(){let e={subcategory:{name:this.name,category_id:this.category}};e.user=this.$store.state.user.id,"new"===this.type?this.createSubcategory(e):this.updateSubcategory(e)},createSubcategory(e){ae.Z.post(se+"/subcategories",e).then((async e=>{console.log(e),ne.Am.success("Subcategoría creada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/subcategories")})).catch((async e=>{console.log(e),ne.Am.error("Error al crear la subcategoría"),await new Promise((e=>setTimeout(e,2e3)))}))},updateSubcategory(e){const t=this.$route.params.id;ae.Z.put(`${se}/subcategories/${t}`,e).then((async e=>{console.log(e),ne.Am.success("Subcategoría actualizada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/subcategories")})).catch((async e=>{console.log(e),ne.Am.error("Error al actualizar la subcategoría"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchSubcategoryData(e){ae.Z.get(`${se}/subcategories/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}}};const Nd=(0,le.Z)(Pd,[["render",Zd],["__scopeId","data-v-4381caed"]]);var qd=Nd;const Rd=e=>((0,c.dD)("data-v-b199eaa6"),e=e(),(0,c.Cn)(),e),Kd={class:"container"},Yd={class:"table-responsive"},Qd={class:"table table-bordered table-secondary"},Gd=Rd((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre del diseño:",-1))),Jd={class:"table-input"},Xd={class:"input-group"},eu=Rd((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-x-diamond-fill"})],-1))),tu=["disabled"],au={class:"d-flex justify-content-end"},su={key:0,class:"btn btn-primary",type:"submit"},nu={key:1,class:"btn btn-danger",type:"submit"};function ou(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Kd,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",Yd,[(0,c._)("table",Qd,[(0,c._)("tbody",null,[(0,c._)("tr",null,[Gd,(0,c._)("td",Jd,[(0,c._)("div",Xd,[eu,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"design","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),disabled:o.isReadOnly},null,8,tu),[[s.nr,o.name]])])])])])])]),(0,c._)("div",au,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",su," Guardar cambios ")),o.isReadOnly?((0,c.wg)(),(0,c.iD)("button",nu," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/designs",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var ru={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={design:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createDesign(e):this.updateDesign(e)},createDesign(e){ae.Z.post(`${se}/designs`,e).then((async e=>{console.log(e),ne.Am.success("Diseño creado exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/designs")})).catch((async e=>{console.log(e),ne.Am.error("Error al crear el diseño"),await new Promise((e=>setTimeout(e,2e3)))}))},updateDesign(e){const t=this.$route.params.id;ae.Z.put(`${se}/designs/${t}`,e).then((async e=>{console.log(e),ne.Am.success("Diseño actualizado exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/designs")})).catch((async e=>{console.log(e),ne.Am.error("Error al actualizar el diseño"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchDesignData(e){ae.Z.get(`${se}/designs/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nuevo Diseño"}};const iu=(0,le.Z)(ru,[["render",ou],["__scopeId","data-v-b199eaa6"]]);var lu=iu;const cu=e=>((0,c.dD)("data-v-e1ec5ea8"),e=e(),(0,c.Cn)(),e),du={class:"container"},uu={class:"table-responsive"},mu={class:"table table-bordered table-secondary"},hu=cu((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre de la bodega:",-1))),_u={class:"table-input"},gu={class:"input-group"},pu=cu((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-box-seam-fill"})],-1))),bu=["disabled"],fu={class:"d-flex justify-content-end"},vu={key:0,class:"btn btn-primary",type:"submit"},yu={key:1,class:"btn btn-danger",type:"submit"};function wu(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",du,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",uu,[(0,c._)("table",mu,[(0,c._)("tbody",null,[(0,c._)("tr",null,[hu,(0,c._)("td",_u,[(0,c._)("div",gu,[pu,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"warehouse",name:"warehouse","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),disabled:o.isReadOnly},null,8,bu),[[s.nr,o.name]])])])])])])]),(0,c._)("div",fu,[o.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",vu," Guardar cambios ")),o.isReadOnly?((0,c.wg)(),(0,c.iD)("button",yu," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/warehouses",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var ku={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={warehouse:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createWarehouse(e):this.updateWarehouse(e)},createWarehouse(e){ae.Z.post(`${se}/warehouses`,e).then((async e=>{console.log(e),ne.Am.success("Bodega creada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/warehouses")})).catch((async e=>{console.log(e),ne.Am.error("Error al crear la bodega"),await new Promise((e=>setTimeout(e,2e3)))}))},updateWarehouse(e){const t=this.$route.params.id;ae.Z.put(`${se}/warehouses/${t}`,e).then((async e=>{console.log(e),ne.Am.success("Bodega actualizada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/warehouses")})).catch((async e=>{console.log(e),ne.Am.error("Error al actualizar la bodega"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchWarehouseData(e){ae.Z.get(`${se}/warehouses/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nueva Bodega"}};const Cu=(0,le.Z)(ku,[["render",wu],["__scopeId","data-v-e1ec5ea8"]]);var xu=Cu;const Du=e=>((0,c.dD)("data-v-436e7ce8"),e=e(),(0,c.Cn)(),e),Iu={class:"background-image"},Ou={class:"d-flex justify-content-center align-items-center vh-100"},Su={class:"overlay"},Au=(0,c.uE)('<div class="mb-4" data-v-436e7ce8><div class="logo-container" data-v-436e7ce8><img src="'+Qe+'" alt="Logo" class="logo" data-v-436e7ce8><h2 class="h2" data-v-436e7ce8>Iniciar sesión</h2></div></div><div class="form-outline mb-4" data-v-436e7ce8><input type="email" id="email" class="form-control" required data-v-436e7ce8><label class="form-label" for="email" data-v-436e7ce8>Correo electrónico</label></div><div class="form-outline mb-4" data-v-436e7ce8><input type="password" id="password" class="form-control" required data-v-436e7ce8><label class="form-label" for="password" data-v-436e7ce8>Contraseña</label></div>',3),Vu={class:"row mb-4"},$u=Du((()=>(0,c._)("div",{class:"col d-flex justify-content-center"},[(0,c._)("div",{class:"form-check"},[(0,c._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"remind_me",checked:""}),(0,c._)("label",{class:"form-check-label",for:"remind_me"},"Recordarme")])],-1))),Tu={class:"col"};function Uu(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)("div",Iu,[(0,c._)("div",Ou,[(0,c._)("div",Su,[(0,c._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"text-center"},[Au,(0,c._)("div",Vu,[$u,(0,c._)("div",Tu,[(0,c.Wm)(i,{to:"/sendEmail"},{default:(0,c.w5)((()=>[(0,c.Uk)("¿Olvidaste tu contraseña?")])),_:1})])]),(0,c._)("button",{type:"submit",class:"btn btn-primary full-width d-block",onClick:t[0]||(t[0]=(...t)=>e.log&&e.log(...t))},"Iniciar sesión")],32)])])])}var Lu={methods:{forgotPass(){this.$router.push("/sendEmail")},login(){const e=document.getElementById("email").value,t=document.getElementById("password").value;let a={email:e,password:t,current_warehouse_logged_id:1};ae.Z.post(`${se}/users/sign_in`,a).then((e=>{const t=e.headers,s=t["authorization"];console.log(e),a=e.data.data,"success"===e.data.status&&(this.$store.commit("setLoggedIn",!0),this.$store.commit("setUser",a),this.$store.commit("setSessionToken",s),this.$router.push("/home"))})).catch((e=>{const{response:t}=e;console.log(t),ne.Am.error("Error al iniciar sesión",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}},mounted(){this.$store.commit("setCheck",!1),this.$store.commit("setLoggedIn",!1),this.$store.commit("setLogAttempt",!1)}};const ju=(0,le.Z)(Lu,[["render",Uu],["__scopeId","data-v-436e7ce8"]]);var zu=ju;const Eu=e=>((0,c.dD)("data-v-d851db14"),e=e(),(0,c.Cn)(),e),Wu={class:"container"},Hu={class:"row justify-content-center"},Bu={class:"col-md-8"},Fu={class:"table table-bordered table-secondary"},Mu=Eu((()=>(0,c._)("td",{class:"table-label"},"Nombre Completo:",-1))),Zu={class:"table-input"},Pu=Eu((()=>(0,c._)("td",{class:"table-label"},"Cédula:",-1))),Nu={class:"table-input"},qu=Eu((()=>(0,c._)("td",{class:"table-label"},"Correo Electrónico:",-1))),Ru={class:"table-input"},Ku=Eu((()=>(0,c._)("td",{class:"table-label"},"Rol:",-1))),Yu={class:"table-input"},Qu=Eu((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar rol",-1))),Gu=Eu((()=>(0,c._)("option",{value:"admin"},"Administrador",-1))),Ju=Eu((()=>(0,c._)("option",{value:"user"},"Usuario Regular",-1))),Xu=[Qu,Gu,Ju],em={class:"text-center"},tm=Eu((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary"},"Registrar Usuario",-1)));function am(e,t,a,n,o,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Wu,[(0,c._)("div",Hu,[(0,c._)("div",Bu,[(0,c._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>r.OnCreateUser&&r.OnCreateUser(...e)),["prevent"]))},[(0,c._)("table",Fu,[(0,c._)("tbody",null,[(0,c._)("tr",null,[Mu,(0,c._)("td",Zu,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.name=e),required:""},null,512),[[s.nr,o.name]])])]),(0,c._)("tr",null,[Pu,(0,c._)("td",Nu,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>o.idCard=e),required:""},null,512),[[s.nr,o.idCard]])])]),(0,c._)("tr",null,[qu,(0,c._)("td",Ru,[(0,c.wy)((0,c._)("input",{type:"email",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>o.email=e),required:""},null,512),[[s.nr,o.email]])])]),(0,c._)("tr",null,[Ku,(0,c._)("td",Yu,[(0,c.wy)((0,c._)("select",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>o.role=e),required:""},Xu,512),[[s.bM,o.role]])])])])]),(0,c._)("div",em,[tm,(0,c.Wm)(i,{to:"/users",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])])])],64)}var sm={data(){return{name:"",idCard:"",email:"",role:"",current_user_id:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},OnCreateUser(){const e={name:this.name,id_card:this.idCard,email:this.email,role:this.role};ae.Z.post(`${se}/users`,{user:e,creator_user_id:this.current_user_id}).then((()=>{ne.Am.success("El usuario ha sido registrado exitosamente",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),setTimeout((()=>{this.name="",this.idCard="",this.email="",this.role=""}),2e3)})).catch((e=>{console.log(e),ne.Am.error("Error al registrar el usuario",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}},mounted(){this.$state.navbarTitle="Registro de usuario",this.current_user_id=this.$store.state.user.id}};const nm=(0,le.Z)(sm,[["render",am],["__scopeId","data-v-d851db14"]]);var om=nm;const rm=e=>((0,c.dD)("data-v-2deba61f"),e=e(),(0,c.Cn)(),e),im={class:"password-reset-form background-image"},lm={class:"card text-center overlay"},cm=rm((()=>(0,c._)("div",{class:"card-header h4 text-white bg-primary"},"Restablecimiento de Contraseña",-1))),dm={class:"card-body"},um=rm((()=>(0,c._)("p",{class:"card-text py-3"}," Ingrese su dirección de correo electrónico y le enviaremos un correo electrónico con las instrucciones para restablecer su contraseña. ",-1))),mm={class:"form-group"},hm=rm((()=>(0,c._)("label",{class:"form-label",for:"typeEmail"},"Correo electrónico",-1))),_m=rm((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary w-100 mt-3"},"Restablecer contraseña",-1))),gm={class:"d-flex justify-content-between mt-4"};function pm(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)("div",im,[(0,c._)("div",lm,[cm,(0,c._)("div",dm,[um,(0,c._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>r.resetPassword&&r.resetPassword(...e)),["prevent"])),class:"text-center"},[(0,c._)("div",mm,[hm,(0,c.wy)((0,c._)("input",{type:"email",id:"typeEmail",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e)},null,512),[[s.nr,o.email]])]),_m],32),(0,c._)("div",gm,[(0,c._)("a",{class:"text-decoration-none",href:"",onClick:t[2]||(t[2]=(...e)=>r.goToLogin&&r.goToLogin(...e))},"O Inicia sesión")])])])])}var bm={data(){return{email:""}},methods:{resetPassword(){const e={user:{email:this.email}};ae.Z.post(`${se}/users/password/`,e).then((e=>{console.log(e),ne.Am.success("Se ha enviado un correo electrónico con las instrucciones para restablecer su contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ne.Am.error("Error en el restablecimiento de contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))},goToLogin(){this.$router.push("/login")}}};const fm=(0,le.Z)(bm,[["render",pm],["__scopeId","data-v-2deba61f"]]);var vm=fm;const ym=e=>((0,c.dD)("data-v-34f07808"),e=e(),(0,c.Cn)(),e),wm={class:"background-image"},km={class:"d-flex justify-content-center align-items-center vh-100"},Cm={class:"overlay"},xm=ym((()=>(0,c._)("div",{class:"mb-4"},[(0,c._)("div",{class:"logo-container"},[(0,c._)("img",{src:Qe,alt:"Logo",class:"logo"}),(0,c._)("h3",{class:"h3"},"Restablecimiento de Contraseña")])],-1))),Dm={class:"form-outline mb-4"},Im=ym((()=>(0,c._)("label",{class:"form-label",for:"new-password"},"Nueva Contraseña",-1))),Om={class:"form-outline mb-4"},Sm=ym((()=>(0,c._)("label",{class:"form-label",for:"confirm-password"},"Confirmar Contraseña",-1))),Am=ym((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary full-width d-block"},"Restaurar Contraseña",-1)));function Vm(e,t,a,n,o,r){return(0,c.wg)(),(0,c.iD)("div",wm,[(0,c._)("div",km,[(0,c._)("div",Cm,[(0,c._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>r.resetPassword&&r.resetPassword(...e)),["prevent"])),class:"text-center"},[xm,(0,c._)("div",Dm,[(0,c.wy)((0,c._)("input",{type:"password",id:"new-password",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>o.new_password=e),required:""},null,512),[[s.nr,o.new_password]]),Im]),(0,c._)("div",Om,[(0,c.wy)((0,c._)("input",{type:"password",id:"confirm-password",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>o.new_password_confirmation=e),required:""},null,512),[[s.nr,o.new_password_confirmation]]),Sm]),Am],32)])])])}var $m={data(){return{new_password:"",new_password_confirmation:"",token:""}},methods:{resetPassword(){if(this.new_password===this.new_password_confirmation){const e={new_password:this.new_password,password_confirmation:this.new_password_confirmation,reset_password_token:this.token};ae.Z.put(`${se}/users/password`,e).then((e=>{ne.Am.success("Contraseña actualizada",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e),this.$router.push("/login")})).catch((e=>{ne.Am.error("No se pudo actualizar la contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)}))}else ne.Am.error("Las contraseñas no coinciden",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}},mounted(){this.$state.navbarTitle="Restablecimiento de Contraseña",this.token=this.$route.query.reset_password_token,console.log(this.token)}};const Tm=(0,le.Z)($m,[["render",Vm],["__scopeId","data-v-34f07808"]]);var Um=Tm;a(5654);const Lm=(0,o.p7)({history:(0,o.r5)(),routes:[{path:"",redirect:"/login"},{path:"/",component:"/login"},{path:"/login",component:zu},{component:ut,meta:{requiresAuth:!0}},{path:"/home",component:de,meta:{requiresAuth:!0}},{path:"/userProfile",component:Ue,meta:{requiresAuth:!0}},{path:"/entry",name:"Entry",component:oa,meta:{requiresAuth:!0}},{path:"/Entry-from-home/:warehouse",name:"Entry-from-home",component:oa,meta:{requiresAuth:!0}},{path:"/transfer",component:ts,meta:{requiresAuth:!0}},{path:"/output",component:Ys,meta:{requiresAuth:!0}},{path:"/inventory",component:Nn,meta:{requiresAuth:!0}},{path:"/items/new/",name:"AddArticle",component:Yc,meta:{requiresAuth:!0}},{path:"/items/edit/:id",name:"EditArticle",component:Yc,meta:{requiresAuth:!0}},{path:"/items/details/:id",name:"ArticleDetails",component:Yc,meta:{requiresAuth:!0}},{path:"/categories/new",name:"AddCategory",component:ud,meta:{requiresAuth:!0}},{path:"/categories/edit/:id",name:"EditCategory",component:ud,meta:{requiresAuth:!0}},{path:"/subcategories/new",name:"AddSubcategory",component:qd,meta:{requiresAuth:!0}},{path:"/subcategories/edit/:id",name:"EditSubcategory",component:qd,meta:{requiresAuth:!0}},{path:"/brands/new",name:"AddBrand",component:Od,meta:{requiresAuth:!0}},{path:"/brands/edit/:id",name:"EditBrand",component:Od,meta:{requiresAuth:!0}},{path:"/designs/new",name:"AddDesign",component:lu,meta:{requiresAuth:!0}},{path:"/designs/edit/:id",name:"EditDesign",component:lu,meta:{requiresAuth:!0}},{path:"/warehouses/new",name:"AddWarehouse",component:xu,meta:{requiresAuth:!0}},{path:"/warehouses/edit/id",name:"EditWarehouse",component:xu,meta:{requiresAuth:!0}},{path:"/items",name:"Items",component:ri,meta:{requiresAuth:!0}},{path:"/categories",component:uo,meta:{requiresAuth:!0}},{path:"/subcategories",component:$o,meta:{requiresAuth:!0}},{path:"/brands",component:Yo,meta:{requiresAuth:!0}},{path:"/designs",component:_r,meta:{requiresAuth:!0}},{path:"/warehouses",component:Tr,meta:{requiresAuth:!0}},{path:"/users",component:ki,meta:{requiresAuth:!0}},{path:"/users/new",name:"AddUser",component:om,meta:{requiresAuth:!0}},{path:"/login",component:zu},{path:"/sendEmail",component:vm},{path:"/resetPassword",component:Um},{path:"/transactions",name:"ListTransaction",component:ll,meta:{requiresAuth:!0}}]}),jm=(0,s.ri)(ut);jm.use(l),jm.use(Lm),Lm.beforeResolve(((e,t,a)=>{const s=e.matched.some((e=>e.meta.requiresAuth));!l.state.isLoggedIn&&s?a("/login"):a()}));const zm=(0,n.qj)({navbarTitle:"Inicio"});jm.config.globalProperties.$state=zm,jm.mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,o){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],o=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/MercadoTelas_FrontEnd/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,o,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkmercado_telas_front"]=self["webpackChunkmercado_telas_front"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8412)}));s=a.O(s)})();
//# sourceMappingURL=app.ae2be3d9.js.map